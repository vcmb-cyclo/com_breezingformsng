<?xml version="1.0" encoding="utf-8" ?>
<FacileFormsPackage id="FF" type="autoincrement" version="5.0.0 Beta (build 1)">
	<name>stdlib.english</name>
	<title>stdlib.english.xml</title>
	<version>6.0.0-RC1</version>
	<creationDate>2026-01-07 16:00:00</creationDate>
	<author>XDA+GIL</author>
	<authorEmail>noreply@vcmb.fr</authorEmail>
	<authorUrl>https://breezingforms.vcmb.fr</authorUrl>
	<description>These are the standard BreezingForms script and piece libraries.</description>
	<copyright>GDA+GIL | Crosstec until 1.0.1</copyright>
	<script id="1">
		<package>FF</package>
		<name>ff_anychecked</name>
		<title>Any Checked</title>
		<type>Element Validation</type>
		<description>Validate that any radio button or checkbox of a group is checked.</description>
		<code>function ff_anychecked(element\x2C message) {\r\n  var name = \x27\x27\x3B\r\n  var cnt = 0\x3B\r\n\r\n  /* --- CAS : collection d\x27éléments (plusieurs radios / checkboxes) --- */\r\n  if (!element.name) {\r\n    if (element.length \x26\x26 element.length !== 0) {\r\n      name = element[0].name\x3B\r\n      var i = 0\x3B\r\n\r\n      while (i !== element.length) {\r\n        if (element[i].name === name \x26\x26 element[i].checked) {\r\n          cnt++\x3B\r\n        }\r\n        i++\x3B\r\n      }\r\n\r\n      if (cnt === 0) {\r\n        ff_validationFocus(element[0].name)\x3B\r\n        if (message === \x27\x27) {\r\n          message = \x22Please check or select \x22 + name + \x22.\x5Cn\x22\x3B\r\n        }\r\n        return message\x3B\r\n      }\r\n      return \x27\x27\x3B\r\n    }\r\n    return \x27\x27\x3B\r\n  }\r\n\r\n  /* --- CAS : UN SEUL élément radio / checkbox --- */\r\n  name = element.name\x3B\r\n\r\n  if (name.substr(0\x2C 6) === \x27ff_nm_\x27) {\r\n    name = name.substring(6\x2C name.length - 2)\x3B\r\n  }\r\n\r\n  if (typeof element.checked !== \x27undefined\x27) {\r\n    if (!element.checked) {\r\n      ff_validationFocus(element.name)\x3B\r\n      if (message === \x27\x27) {\r\n        message = \x22Please check or select \x22 + name + \x22.\x5Cn\x22\x3B\r\n      }\r\n      return message\x3B\r\n    }\r\n    return \x27\x27\x3B\r\n  }\r\n\r\n  /* --- CAS : gestion via ff_elements (fallback legacy) --- */\r\n  cnt = 0\x3B\r\n  var i = 0\x3B\r\n\r\n  while (i !== ff_elements.length) {\r\n    if (ff_elements[i][2] === name) {\r\n      if (ff_getElementByIndex(i).checked) {\r\n        cnt++\x3B\r\n      }\r\n    }\r\n    i++\x3B\r\n  }\r\n\r\n  if (cnt === 0) {\r\n    ff_validationFocus(element.name)\x3B\r\n    if (message === \x27\x27) {\r\n      message = \x22Please check or select \x22 + name + \x22.\x5Cn\x22\x3B\r\n    }\r\n    return message\x3B\r\n  }\r\n\r\n  return \x27\x27\x3B\r\n}</code>
	</script>
	<script id="2">
		<package>FF</package>
		<name>ff_checked</name>
		<title>Checked</title>
		<type>Element Validation</type>
		<description>Validate that radio button or checkbox is checked.</description>
		<code>function ff_checked(element\x2C message)\r\n{\r\n    if (element.checked) \r\n        return \x27\x27\x3B \r\n    else {\r\n        if (message==\x27\x27) message = element.name+\x22 is not checked.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } \r\n}</code>
	</script>
	<script id="3">
		<package>FF</package>
		<name>ff_checkedValue</name>
		<title>Get checked value</title>
		<description>Get value of the currently checked radiobutton.</description>
		<code>function ff_checkedValue(name)\r\n{\r\n    // loop through elements and find checked\r\n    for (i = 0\x3B i \x3C ff_elements.length\x3B i++)\r\n        if (ff_elements[i][2]==name) {\r\n            e = ff_getElementByIndex(i)\x3B\r\n            if (e.checked) return e.value\x3B\r\n        } // if \r\n    return \x27\x27\x3B\r\n} // ff_checkedValue</code>
	</script>
	<script id="4">
		<package>FF</package>
		<name>ff_countQuerySelections</name>
		<title>Count Query Selections</title>
		<description>Counts how many checkboxes/radiobuttons are checked/selected in a query list element</description>
		<code>function ff_countQuerySelections(name)\r\n{\r\n    var id = ff_getIdByName(name)\x3B\r\n    var cnt = ff_queryRows[id].length\x3B\r\n    var pagesize = ff_queryPageSize[id]\x3B\r\n    if (pagesize\x3E0) {\r\n        var currpage = ff_queryCurrPage[id]\x3B\r\n        var p\x3B\r\n        for (p = 1\x3B p \x3C currpage\x3B p++) cnt -= pagesize\x3B\r\n        if (cnt \x3E pagesize) cnt = pagesize\x3B\r\n    } // if\r\n    var curr\x3B\r\n    var sels = 0\x3B\r\n    for (curr = 0\x3B curr \x3C cnt\x3B curr++)\r\n        if (document.getElementById(\x27ff_cb\x27+id+\x27_\x27+curr).checked) sels++\x3B\r\n    return sels\x3B\r\n} // ff_countQuerySelections</code>
	</script>
	<script id="5">
		<package>FF</package>
		<name>ff_dollaramount2dp</name>
		<title>Dollar Amount with 2 Decimal Places</title>
		<type>Element Validation</type>
		<description>Validate that a dollar amount with two decimal places is entered.</description>
		<code>function ff_dollaramount2dp(element\x2C message)\r\n{\r\n    var ex  = /^\x5Cd+$|^\x5Cd+\x5C.\x5Cd{2}$/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = element.name+\x22 must be a number with two decimal places.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_dollaramount2dp</code>
	</script>
	<script id="6">
		<package>FF</package>
		<name>ff_expString</name>
		<title>String export</title>
		<description>Export string function: escapes special characters of a string</description>
		<code>function ff_expString(text)\r\n{\r\n    text = trim(text)\x3B\r\n    var i\x3B\r\n    var o = \x27\x27\x3B\r\n    for(i = 0\x3B i \x3C text.length\x3B i++) {\r\n        c = text.charAt(i)\x3B\r\n        switch(c) {\r\n            case \x27\x3B\x27 : o += \x27\x5C\x5Cx3B\x27\x3B break\x3B\r\n            case \x27\x2C\x27 : o += \x27\x5C\x5Cx2C\x27\x3B break\x3B\r\n            case \x27\x26\x27 : o += \x27\x5C\x5Cx26\x27\x3B break\x3B\r\n            case \x27\x3C\x27 : o += \x27\x5C\x5Cx3C\x27\x3B break\x3B\r\n            case \x27\x3E\x27 : o += \x27\x5C\x5Cx3E\x27\x3B break\x3B\r\n            case \x27\x5C\x27\x27: o += \x27\x5C\x5Cx27\x27\x3B break\x3B\r\n            case \x27\x5C\x5C\x27: o += \x27\x5C\x5Cx5C\x27\x3B break\x3B\r\n            case \x27\x22\x27 : o += \x27\x5C\x5Cx22\x27\x3B break\x3B\r\n            case \x27\x5Cn\x27: o += \x27\x5C\x5Cn\x27\x3B break\x3B\r\n            case \x27\x5Cr\x27: o += \x27\x5C\x5Cr\x27\x3B break\x3B\r\n            default: o += c\x3B\r\n        } // switch\r\n    } // for\r\n    return o\x3B\r\n} // expString</code>
	</script>
	<script id="7">
		<package>FF</package>
		<name>ff_flashupload_not_empty</name>
		<title>Flash Upload Not Empty (QuickMode only!)</title>
		<type>Element Validation</type>
		<description>Validates if a flash upload is empty or not.</description>
		<code>function ff_flashupload_not_empty(element\x2C message)\r\n{\r\n    if(typeof bfSummarizers == \x22undefined\x22) { \r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n            alert(\x22Flash upload validation only available in QuickMode!\x22)\x3B\r\n        } else {\r\n            alert(\x22Flash upload validation only available in QuickMode!\x22)\x3B\r\n        } \r\n    return \x27\x27\x3B}\r\n    if(JQuery(\x27#bfFlashFileQueue\x27+element.id.split(\x27ff_elem\x27)[1]).html() != \x27\x27) return \x27\x27\x3B\r\n    if (message==\x27\x27) message = \x22Please enter \x22+element.name+\x22.\x5Cn\x22\x3B\r\n    ff_validationFocus(element.name)\x3B\r\n    return message\x3B\r\n} // ff_valuenotempty</code>
	</script>
	<script id="8">
		<package>FF</package>
		<name>ff_getfocus</name>
		<title>Get focus</title>
		<type>Element Init</type>
		<description>Get the focus. Usually this is for the first element of the form/page.</description>
		<code>function ff_getfocus(element\x2Ccondition)\r\n{\r\n    if(!element.name){\r\n    	if(element.length \x26\x26 element.length != 0){\r\n    		element[0].focus()\x3B\r\n    	}\r\n    }else{\r\n    	element.focus()\x3B\r\n    }\r\n}</code>
	</script>
	<script id="9">
		<package>FF</package>
		<name>ff_getQuerySelectedRows</name>
		<title>Get Query Selected Rows</title>
		<description>Returns the selected rows in a 2-dimensional array</description>
		<code>function ff_getQuerySelectedRows(name)\r\n{\r\n    var id = ff_getIdByName(name)\x3B\r\n    var rcnt = ff_queryRows[id].length\x3B\r\n    var cnt = rcnt\x3B\r\n    var pagesize = ff_queryPageSize[id]\x3B\r\n    if (pagesize\x3E0) {\r\n        var currpage = ff_queryCurrPage[id]\x3B\r\n        var p\x3B\r\n        for (p = 1\x3B p \x3C currpage\x3B p++) cnt -= pagesize\x3B\r\n        if (cnt \x3E pagesize) cnt = pagesize\x3B\r\n    } // if\r\n    var curr\x2C r\x3B\r\n    var selcnt = 0\x3B\r\n    var sels = new Array\x3B\r\n    for (curr = 0\x3B curr \x3C cnt\x3B curr++) {\r\n        var elem = document.getElementById(\x27ff_cb\x27+id+\x27_\x27+curr)\x3B\r\n        if (elem.checked) {\r\n            var ident = elem.value\x3B\r\n            for (r = 0\x3B r \x3C rcnt\x3B r++)\r\n                if (ff_queryRows[id][r][0] == ident) {\r\n                    sels[selcnt++] = ff_queryRows[id][r]\x3B\r\n                    break\x3B\r\n                } // if\r\n        } // if\r\n    } // for\r\n    return sels\x3B\r\n} // ff_getQuerySelectedRows</code>
	</script>
	<script id="10">
		<package>FF</package>
		<name>ff_getQuerySelections</name>
		<title>Get Query Selected ID\x27s</title>
		<description>Returns the column values of the checked/selected checkboxes/radiobuttons in an array</description>
		<code>function ff_getQuerySelections(name)\r\n{\r\n    var id = ff_getIdByName(name)\x3B\r\n    var cnt = ff_queryRows[id].length\x3B\r\n    var pagesize = ff_queryPageSize[id]\x3B\r\n    if (pagesize\x3E0) {\r\n        var currpage = ff_queryCurrPage[id]\x3B\r\n        var p\x3B\r\n        for (p = 1\x3B p \x3C currpage\x3B p++) cnt -= pagesize\x3B\r\n        if (cnt \x3E pagesize) cnt = pagesize\x3B\r\n    } // if\r\n    var curr\x3B\r\n    var selcnt = 0\x3B\r\n    var sels = new Array\x3B\r\n    for (curr = 0\x3B curr \x3C cnt\x3B curr++) {\r\n        var elem = document.getElementById(\x27ff_cb\x27+id+\x27_\x27+curr)\x3B\r\n        if (elem.checked) \r\n            sels[selcnt++] = elem.value\x3B\r\n    } // for\r\n    return sels\x3B\r\n} // ff_getQuerySelections</code>
	</script>
	<script id="11">
		<package>FF</package>
		<name>ff_htmlvaluenotempty</name>
		<title>HTML Texteditor Not Empty</title>
		<type>Element Validation</type>
		<description>Checks if an HTML editor element is empty or not</description>
		<code>function ff_htmlvaluenotempty( element\x2C message ){\r\n    \r\n    if( typeof bf_htmltextareanames == \x22undefined\x22 ) return \x27\x27\x3B\r\n\r\n    var content = \x22\x22\x3B\r\n\r\n    for(var i = 0\x3B i \x3C bf_htmltextareanames.length\x3B i++){\r\n      if( element.name == bf_htmltextareanames[i] ) {\r\n          eval(\x22content = \x22 + bf_htmltextareas[i])\x3B\r\n          break\x3B\r\n      }\r\n    }\r\n    if (JQuery.trim(content) == \x22\x22) {\r\n        if (message==\x27\x27) message = element.name+\x22 must not be empty.\x5Cn\x22\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n}</code>
	</script>
	<script id="12">
		<package>FF</package>
		<name>ff_impString</name>
		<title>String import</title>
		<description>Import string function: unescapes c-coded characters of a string</description>
		<code>function ff_impString(text)\r\n{\r\n    var str = \x27\x27\x3B\r\n    var ss = 0\x3B\r\n    var s\x3B\r\n    var tl = text.length\x3B\r\n    var hexdigs = \x220123456789abcdefABCDEF\x22\x3B\r\n    while (ss \x3C tl) {\r\n        s = text.charAt(ss++)\x3B\r\n        if (s == \x27\x5C\x5C\x27) {\r\n            if (ss \x3C tl) s = text.charAt(ss++)\x3B else s = 0\x3B\r\n            switch (s) {\r\n                case 0   : break\x3B\r\n                case \x27e\x27 : str += \x27\x5C33\x27\x3B break\x3B\r\n                case \x27t\x27 : str += \x27\x5Ct\x27\x3B break\x3B\r\n                case \x27r\x27 : str += \x27\x5Cr\x27\x3B break\x3B\r\n                case \x27n\x27 : str += \x27\x5Cn\x27\x3B break\x3B\r\n                case \x27f\x27 : str += \x27\x5Cf\x27\x3B break\x3B\r\n                case \x27x\x27 : {\r\n                    if (ss \x3C tl) s = text.charAt(ss++)\x3B else s = 0\x3B\r\n                    var ch = \x27\x27\x3B\r\n                    while (hexdigs.indexOf(s)\x3E=0 \x26\x26 ch.length \x3C 2) {\r\n                        ch += s\x3B\r\n                        if (ss \x3C tl) s = text.charAt(ss++)\x3B else s = 0\x3B\r\n                    } // while\r\n                    while (ch.length \x3C 2) ch = \x270\x27+ch\x3B\r\n                    str += unescape(\x27%\x27+ch)\x3B\r\n                    if (s) ss--\x3B\r\n                    break\x3B\r\n                }\r\n                default:\r\n                    str += s\x3B\r\n            } // switch\r\n        } else\r\n            str += s\x3B\r\n    } // while\r\n    return str\x3B\r\n} // impString</code>
	</script>
	<script id="13">
		<package>FF</package>
		<name>ff_integer</name>
		<title>Integer Number</title>
		<type>Element Validation</type>
		<description>Validate that an integer value is entered.</description>
		<code>function ff_integer(element\x2C message)\r\n{\r\n    var ex  = /(^-?\x5Cd\x5Cd*$)/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = element.name+\x22 must be integer.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_integer</code>
	</script>
	<script id="14">
		<package>FF</package>
		<name>ff_integer_or_empty</name>
		<title>Integer or empty</title>
		<type>Element Validation</type>
		<description>Validate that either an integer value or nothing is entered.</description>
		<code>function ff_integer_or_empty(element\x2C message)\r\n{\r\n    if (element.value != \x27\x27) {\r\n        var ex  = /(^-?\x5Cd\x5Cd*$)/\x3B\r\n        if (!ex.test(element.value)) {\r\n            if (message==\x27\x27) message = element.name+\x22 must be integer.\x5Cn\x22\x3B\r\n            ff_validationFocus(element.name)\x3B\r\n            return message\x3B\r\n        } // if\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_integer_or_empty</code>
	</script>
	<script id="15">
		<package>FF</package>
		<name>ff_integeramount</name>
		<title>Positive Integer</title>
		<type>Element Validation</type>
		<description>Validate that an positive integer value is entered.</description>
		<code>function ff_integeramount(element\x2C message)\r\n{\r\n    var ex  = /(^-?\x5Cd\x5Cd*$)/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = element.name+\x22 must be integer.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_integeramount</code>
	</script>
	<script id="16">
		<package>FF</package>
		<name>ff_MaxCheckedInGroups</name>
		<title>MaxCheckedInGroups</title>
		<type>Element Validation</type>
		<description>Checks 5 groups with the names of \x22group1\x22 to \x22group5\x22 if they altogether have at least 1 and up to 20 max checkboxes being checked.\r\nYou can edit the amount of groups and group names by changing the Script code in the Manage Scripts section of BreezingForms and opening the \x22MaxCheckedInGroups\x22 validation for editing.</description>
		<code>function ff_MaxCheckedInGroups(element\x2C message)\r\n{ \r\n    // setup\r\n    let fields = [\x27group1\x27\x2C \x27group2\x27\x2C \x27group3\x27\x2C \x27group4\x27\x2C \x27group5\x27]\x3B\r\n    let max_checked = 20\x3B\r\n\r\n    // actual calculation\r\n    let checked_length = 0\x3B\r\n\r\n    for(let i = 0\x3B i \x3C fields.length\x3B i++){\r\n        let checkboxes = JQuery(\x22[name=\x5C\x22ff_nm_\x22+fields[i]+\x22[]\x5C\x22]:checked\x22)\x3B\r\n        checked_length += checkboxes.length\x3B\r\n    }\r\n\r\n    if (checked_length  == 0 || checked_length \x3E max_checked){\r\n        if (message==\x27\x27) message = element.name+\x22 faild in my test.\x5Cn\x22\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    }\r\n    else {\r\n        return \x27\x27\x3B\r\n    }\r\n}</code>
	</script>
	<script id="17">
		<package>FF</package>
		<name>ff_nextpage</name>
		<title>Next page</title>
		<type>Element Action</type>
		<description>Switchs to the next page.</description>
		<code>function ff_nextpage(element\x2C action)\r\n{\r\n    if (ff_currentpage \x3C ff_lastpage) {\r\n        ff_switchpage(ff_currentpage+1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B\r\n    }\r\n} // ff_nextpage</code>
	</script>
	<script id="18">
		<package>FF</package>
		<name>ff_page1</name>
		<title>Page 1</title>
		<type>Element Action</type>
		<description>Switches to the first page.</description>
		<code>function ff_page1(element\x2C action)\r\n{\r\n    ff_switchpage(1)\x3B\r\n} // ff_page1</code>
	</script>
	<script id="19">
		<package>FF</package>
		<name>ff_page2</name>
		<title>Page 2</title>
		<type>Element Action</type>
		<description>Switches to the second page.</description>
		<code>function ff_page2(element\x2C action)\r\n{\r\n    if (ff_lastpage \x3E= 2) ff_switchpage(2)\x3B\r\n} // ff_page2</code>
	</script>
	<script id="20">
		<package>FF</package>
		<name>ff_page3</name>
		<title>Page 3</title>
		<type>Element Action</type>
		<description>Switches to the third page.</description>
		<code>function ff_page3(element\x2C action)\r\n{\r\n    if (ff_lastpage \x3E= 3) ff_switchpage(3)\x3B\r\n} // ff_page3</code>
	</script>
	<script id="21">
		<package>FF</package>
		<name>ff_previouspage</name>
		<title>Previous page</title>
		<type>Element Action</type>
		<description>Switches to the previous page.</description>
		<code>function ff_previouspage(element\x2C action)\r\n{\r\n    if (ff_currentpage \x3E 1){\r\n        ff_switchpage(ff_currentpage-1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B\r\n    }\r\n} // ff_previouspage</code>
	</script>
	<script id="22">
		<package>FF</package>
		<name>ff_real</name>
		<title>Real Number</title>
		<type>Element Validation</type>
		<description>Validate that a real number is entered.</description>
		<code>function ff_real(element\x2C message)\r\n{\r\n    var ex  = /(^-?\x5Cd\x5Cd*\x5C.?\x5Cd*$)/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = element.name+\x22 must be a number.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_real</code>
	</script>
	<script id="23">
		<package>FF</package>
		<name>ff_realamount</name>
		<title>Positive Real Number</title>
		<type>Element Validation</type>
		<description>Validate that a positive real number is entered.</description>
		<code>function ff_realamount(element\x2C message)\r\n{\r\n    var ex  = /(^\x5Cd\x5Cd*\x5C.?\x5Cd*$)/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = element.name+\x22 must be a number.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_realamount</code>
	</script>
	<script id="24">
		<package>FF</package>
		<name>ff_resetForm</name>
		<title>Reset form</title>
		<type>Element Action</type>
		<description>Reset all form inputs to the initial values.</description>
		<code>function ff_resetForm(element\x2C action) {\r\n    // Accéder au formulaire directement par son ID sans utiliser eval\r\n    var form = document.getElementById(ff_processor.form_id)\x3B\r\n    \r\n    // Si le formulaire est trouvé\x2C le réinitialiser\r\n    if (form) {\r\n        form.reset()\x3B\r\n    } else {\r\n        console.error(\x27Formulaire non trouvé avec l\x5C\x27ID:\x27\x2C ff_processor.form_id)\x3B\r\n    }\r\n}\r\n// Changelog\r\n// v1.1 (20/08/2024) : suppress eval ()</code>
	</script>
	<script id="25">
		<package>FF</package>
		<name>ff_securitycode_entered</name>
		<title>Security code entered</title>
		<type>Element Validation</type>
		<description>Check that a security code was entered.</description>
		<code>function ff_securitycode_entered(element\x2C message)\r\n{\r\n    var ex  = /(^\x5Cd{5}$)/\x3B\r\n    if (!ex.test(element.value)) {\r\n        if (message==\x27\x27) message = \x22Security code must be entered as five digits.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_securitycode_entered</code>
	</script>
	<script id="26">
		<package>FF</package>
		<name>ff_securitycode_ok</name>
		<title>Security code ok</title>
		<type>Element Validation</type>
		<description>Check that a valid security code was entered.</description>
		<code>function ff_securitycode_ok(element\x2C message)\r\n{\r\n\x3C?php\r\n    global $ff_seccode\x3B\r\n    if (!isset($ff_seccode)) { \r\n        mt_srand((double)microtime()*1000000)\x3B\r\n        $ff_seccode = mt_rand(10000\x2C 99999)\x3B\r\n        Joomla\x5CCMS\x5CFactory::getSession()-\x3Eset(\x27ff_seccode\x27\x2C $ff_seccode)\x3B\r\n    } // if\r\n    $enc = array()\x3B\r\n    mt_srand((double)microtime()*1000000)\x3B\r\n    for ($i = 0\x3B $i \x3C 256\x3B $i++) $enc[] = mt_rand(0\x2C 255)\x3B\r\n    $seccode = (string)$ff_seccode\x3B\r\n    $hash = \x27\x27\x3B\r\n    $ini = $ff_seccode % 240\x3B\r\n    for ($i = 0\x3B $i \x3C 5\x3B $i++) {\r\n        $d = $ini+intval($seccode{$i})\x3B\r\n        for ($j = 0\x3B $j \x3C 7\x3B $j++) $d = $enc[$d]\x3B\r\n        $hash .= $d\x3B\r\n        $ini = ($ini+$d) % 240\x3B\r\n    } // for\r\n    return\r\n        \x22var enc = \x22.$this-\x3EexpJsValue($enc).\x22\x3B\x5Cn\x22.\r\n        \x22var seccode = new String(element.value)\x3B\x5Cn\x22.\r\n        \x22if (seccode.length==5) {\x5Cn\x22.\r\n        \x22    var hash = \x27\x27\x3B\x5Cn\x22.\r\n        \x22    var ini = parseInt(element.value) % 240\x3B\x5Cn\x22.\r\n        \x22    var i\x2C j\x3B\x5Cn\x22.\r\n        \x22    for (i = 0\x3B i \x3C 5\x3B i++) {\x5Cn\x22.\r\n        \x22        var d = ini+parseInt(seccode.charAt(i))\x3B\x5Cn\x22.\r\n        \x22        for (j = 0\x3B j \x3C 7\x3B j++) d = enc[d]\x3B\x5Cn\x22.\r\n        \x22        hash += d\x3B\x5Cn\x22.\r\n        \x22        ini = (ini+d) % 240\x3B\x5Cn\x22.\r\n        \x22    } // for\x5Cn\x22.\r\n        \x22    if (hash == \x27$hash\x27) return \x27\x27\x3B\x5Cn\x22. \r\n        \x22} // if\x5Cn\x22.\r\n        \x22if (message==\x27\x27) message = \x5C\x22Security code is missing or wrong.\x5C\x5Cn\x5C\x22\x3B\x5Cn\x22.\r\n        \x22ff_validationFocus(element.name)\x3B\x5Cn\x22.\r\n        \x22return message\x3B\x5Cn\x22\x3B\r\n?\x3E\r\n} // ff_securitycode_ok</code>
	</script>
	<script id="27">
		<package>FF</package>
		<name>ff_selectedValues</name>
		<title>Get selected values as list</title>
		<description>Get values of selected options of a select list as list:\r\n\r\nx = ff_selectedValues(\x27myselectlist\x27)\x3B\r\n// x = green\x2Cred</description>
		<code>// XDA : 6/1/2025 \r\nfunction ff_selectedValuesCheckboxes(name) {\r\n    // Sélectionner les checkboxes avec le nom spécifié et qui sont cochées\r\n    var checkboxes = document.querySelectorAll(\x27input[name=\x22ff_nm_\x27 + name + \x27[]\x22]:checked\x27)\x3B\r\n\r\n    // Vérifier s\x27il y a des checkboxes sélectionnées\r\n    if (checkboxes.length === 0) {\r\n        console.warn(\x22Aucune case sélectionnée pour le nom: \x22 + name)\x3B\r\n        return \x27\x27\x3B // Retourner une chaîne vide si aucune case n\x27est sélectionnée\r\n    }\r\n\r\n    // Récupérer les valeurs sélectionnées\x2C supprimer les espaces superflus\x2C et les joindre par des virgules\r\n    return Array.from(checkboxes)\r\n        .map((checkbox) =\x3E checkbox.value.trim()) // Utilisation de trim pour éliminer les espaces\r\n        .join(\x27\x2C\x27)\x3B\r\n} // ff_selectedValuesCheckboxes</code>
	</script>
	<script id="28">
		<package>FF</package>
		<name>ff_setChecked</name>
		<title>Set radiobutton checked</title>
		<description>Set a radiobutton checked/unchecked\r\n\r\nExemple : \r\nff_setChecked(\x27Civility\x27\x2C \x27Female\x27\x2C false)\x3B\r\n\r\nVersion 1.1 : fix issue (check only the first item).</description>
		<code>// 03/2025 (xda): fix issue (check only the first item).\r\nfunction ff_setChecked(name\x2C value\x2C checked)\r\n{\r\n    if (arguments.length\x3C3) checked = true\x3B\r\n    for (var i = 0\x3B i \x3C ff_elements.length\x3B i++) {\r\n        if (ff_elements[i][2] == name) {\r\n            var e = ff_getElementByIndex(i)\x3B\r\n            radiobuttons = document.getElementsByName(e.name)\x3B\r\n            for (var radiobutton of radiobuttons) {\r\n                if (radiobutton.value == value) {\r\n                    radiobutton.checked = checked\x3B\r\n                    break\x3B\r\n                } // if\r\n            } // for\r\n        } // if\r\n    } // for\r\n} // ff_setChecked</code>
	</script>
	<script id="29">
		<package>FF</package>
		<name>ff_setSelected</name>
		<title>Select options of  select list</title>
		<description>ff_setSelected(name\x2C values\x2C checked = true)\r\n\r\nff_setSelected(\x27mylist\x27\x2C \x27green\x27)\x3B // select (check) green in single entry\r\nff_setSelected(\x27mylist\x27\x2C \x27red \x2C green\x27)\x3B // select red and green in multi-entries\r\n(Default = true (check)) \x2C separator = \x27 \x2C \x27 and/or \x27 \x3B \x27\r\n\r\nff_setSelected(\x27mylist\x27\x2C \x27red \x3B green\x27\x2C false)\x3B // uncheck red and green in multi mode</description>
		<code>// (Gil - Version : 06/01/2025)\r\n// Untyped\r\n// 06/01/2025 - Gilles\r\n// Note: bug fix + Add separator \x27\x3B\x27 or/and \x27\x2C\x27\r\n// Tested PHP 8.3\x2C Joomla 5.2\r\nfunction ff_setSelected(name\x2C values\x2C checked = true) {\r\n    // Si \x27values\x27 est une chaîne\x2C on la convertit en tableau en utilisant virgule et point-virgule comme séparateurs\r\n    if (typeof values === \x27string\x27) {\r\n        values = values.split(/[\x3B\x2C]\x5Cs*/)\x3B // Sépare sur \x27\x2C\x27 ou \x27\x3B\x27 et enlève les espaces après le séparateur\r\n    }\r\n\r\n    // Appliquer trim sur chaque valeur\r\n    values = values.map(value =\x3E value.trim())\x3B\r\n\r\n    for (var i = 0\x3B i \x3C ff_elements.length\x3B i++) {\r\n        if (ff_elements[i][2] == name) {\r\n            var e = ff_getElementByIndex(i)\x3B\r\n            var checkboxes = document.getElementsByName(e.name)\x3B\r\n\r\n            // Parcourt les cases à cocher pour définir uniquement celles dans \x27values\x27\r\n            for (var checkbox of checkboxes) {\r\n                // Appliquer trim à la valeur de la case à cocher avant de la comparer\r\n                if (values.includes(checkbox.value.trim())) {\r\n                    checkbox.checked = checked\x3B // Définit uniquement les cases spécifiées\r\n                }\r\n                // Les autres cases ne sont pas modifiées\r\n            }\r\n            break\x3B // Une fois trouvé\x2C on sort\r\n        }\r\n    }\r\n}</code>
	</script>
	<script id="30">
		<package>FF</package>
		<name>ff_showaction</name>
		<title>Show action</title>
		<type>Element Action</type>
		<description>Displays the element action.</description>
		<code>function ff_showaction(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n        alert(\x27Action \x27+action+\x27 performed by element \x27+element.id)\x3B\r\n    } else {\r\n        alert(\x27Action \x27+action+\x27 performed by element \x27+element.id)\x3B\r\n    }\r\n   \r\n}</code>
	</script>
	<script id="31">
		<package>FF</package>
		<name>ff_showelementinit</name>
		<title>Show element initialization</title>
		<type>Element Init</type>
		<description>Display the element initialization (mainly for debugging)</description>
		<code>function ff_showelementinit(element\x2Ccondition)\r\n{\r\n    if(!element.name) {\r\n    	if(element.length \x26\x26 element.length != 0){\r\n            if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n                alert(\x27Initialization of \x27+element[0].name+\x27 at \x27+condition)\x3B\r\n            } else {\r\n                alert(\x27Initialization of \x27+element[0].name+\x27 at \x27+condition)\x3B\r\n            }\r\n        }\r\n    } else {\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n            alert(\x27Initialization of \x27+element.name+\x27 at \x27+condition)\x3B\r\n        } else {\r\n            alert(\x27Initialization of \x27+element.name+\x27 at \x27+condition)\x3B\r\n        }\r\n    }\r\n}</code>
	</script>
	<script id="32">
		<package>FF</package>
		<name>ff_showforminit</name>
		<title>Show form initialization</title>
		<type>Form Init</type>
		<description>Show when form initialization is run (for debugging)</description>
		<code>function ff_showforminit()\r\n{\r\n      if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n        alert(\x27Form initialization\x27)\x3B\r\n    } else {\r\n        alert(\x27Form initialization\x27)\x3B\r\n    }\r\n}</code>
	</script>
	<script id="33">
		<package>FF</package>
		<name>ff_showsubmitted</name>
		<title>Show submitted status</title>
		<type>Form Submitted</type>
		<description>Display submit status as user feedback.</description>
		<code>function ff_showsubmitted(status\x2C message)\r\n{\r\n    if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n        alert(message)\x3B\r\n    } else {\r\n        alert(message)\x3B\r\n    }\r\n} // ff_showsubmitted</code>
	</script>
	<script id="34">
		<package>FF</package>
		<name>ff_showvalidation</name>
		<title>Show element validation</title>
		<type>Element Validation</type>
		<description>Display element validation (for debugging)</description>
		<code>function ff_showvalidation(element\x2C message)\r\n{\r\n    if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n        alert(\x27Validation of \x27+element.name+\x22 with message: \x5Cn\x22+message)\x3B\r\n    } else {\r\n        alert(\x27Validation of \x27+element.name+\x22 with message: \x5Cn\x22+message)\x3B\r\n    }\r\n    return \x27\x27\x3B\r\n}</code>
	</script>
	<script id="35">
		<package>FF</package>
		<name>ff_submittedhome</name>
		<title>Return to homepage</title>
		<type>Form Submitted</type>
		<description>Display submit status and then return to the home page of the site.</description>
		<code>function ff_submittedhome(status\x2C message)\r\n{\r\n    if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n        alert(message+\x22\x5CnYou will be redirected to the home page now.\x22)\x3B\r\n    } else {\r\n        alert(message+\x22\x5CnYou will be redirected to the home page now.\x22)\x3B\r\n    }\r\n    ff_returnHome()\x3B\r\n} // ff_submittedhome</code>
	</script>
	<script id="36">
		<package>FF</package>
		<name>ff_unchecked</name>
		<title>Unchecked</title>
		<type>Element Validation</type>
		<description>Validate that radio button or checkbox is unchecked.</description>
		<code>function ff_unchecked(element\x2C message)\r\n{\r\n    if (!element.checked) \r\n        return \x27\x27\x3B \r\n    else {\r\n        if (message==\x27\x27) message = element.name+\x22 is checked.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n} // ff_unchecked</code>
	</script>
	<script id="37">
		<package>FF</package>
		<name>ff_url_validation</name>
		<title>Url Validation</title>
		<type>Element Validation</type>
		<description>Validates a url.</description>
		<code>function ff_url_validation(element\x2C message)\r\n{\r\n\r\n         if (element.value.trim() == \x27\x27 || !bf_isUrlValid(element.value)) {\r\n             if (message==\x27\x27) message = element.name+\x22 faild in my test.\x5Cn\x22\r\n             ff_validationFocus(element.name)\x3B\r\n             return message\x3B\r\n         } // if\r\n         return \x27\x27\x3B\r\n     } // ff_some_element_validation\r\n\r\n\r\nfunction bf_isUrlValid(url) {\r\n    return /^(https?|s?ftp):\x5C/\x5C/(((([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(%[\x5Cda-f]{2})|[!\x5C$\x26\x27\x5C(\x5C)\x5C*\x5C+\x2C\x3B=]|:)*@)?(((\x5Cd|[1-9]\x5Cd|1\x5Cd\x5Cd|2[0-4]\x5Cd|25[0-5])\x5C.(\x5Cd|[1-9]\x5Cd|1\x5Cd\x5Cd|2[0-4]\x5Cd|25[0-5])\x5C.(\x5Cd|[1-9]\x5Cd|1\x5Cd\x5Cd|2[0-4]\x5Cd|25[0-5])\x5C.(\x5Cd|[1-9]\x5Cd|1\x5Cd\x5Cd|2[0-4]\x5Cd|25[0-5]))|((([a-z]|\x5Cd|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(([a-z]|\x5Cd|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])*([a-z]|\x5Cd|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])))\x5C.)+(([a-z]|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(([a-z]|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])*([a-z]|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])))\x5C.?)(:\x5Cd*)?)(\x5C/((([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(%[\x5Cda-f]{2})|[!\x5C$\x26\x27\x5C(\x5C)\x5C*\x5C+\x2C\x3B=]|:|@)+(\x5C/(([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(%[\x5Cda-f]{2})|[!\x5C$\x26\x27\x5C(\x5C)\x5C*\x5C+\x2C\x3B=]|:|@)*)*)?)?(\x5C?((([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(%[\x5Cda-f]{2})|[!\x5C$\x26\x27\x5C(\x5C)\x5C*\x5C+\x2C\x3B=]|:|@)|[\x5CuE000-\x5CuF8FF]|\x5C/|\x5C?)*)?(#((([a-z]|\x5Cd|-|\x5C.|_|~|[\x5Cu00A0-\x5CuD7FF\x5CuF900-\x5CuFDCF\x5CuFDF0-\x5CuFFEF])|(%[\x5Cda-f]{2})|[!\x5C$\x26\x27\x5C(\x5C)\x5C*\x5C+\x2C\x3B=]|:|@)|\x5C/|\x5C?)*)?$/i.test(url)\x3B\r\n}</code>
	</script>
	<script id="38">
		<package>FF</package>
		<name>ff_validate_date</name>
		<title>Validate Date</title>
		<type>Element Validation</type>
		<description>Validates that the date in a textfield is correctly formatted in the  format given as prefix in the error message setup.\r\nExample format definition in the message:\r\n\r\nYYYY-MM-DD***-***The actual error message.\r\n\r\nThe middle part ***-*** indicates the separator being used (dash in this case) and also separates the format from the actual error message.\r\n\r\nCan be used with a textfield element and/or the Calendar element.</description>
		<code>function ff_validate_date(element\x2C message)\r\n{\r\n   let separator = \x27-\x27\x3B // default\r\n   let format = \x27YYYY-MM-DD\x27\x3B // default\r\n   let splitted_message = message.split(\x22***\x22)\x3B\r\n   let year_index = 0\x3B\r\n   let month_index =1\x3B\r\n   let day_index = 2\x3B\r\n   let year_length = 4\x3B\r\n   let month_length = 2\x3B\r\n   let day_length = 2\x3B\r\n\r\n   if( splitted_message.length == 3 ){\r\n       format = splitted_message[0].split(\x22 \x22)[0].trim().toUpperCase()\x3B // in case there is the time\x2C as well\x2C we want the \x22left\x22 side\x2C only\r\n       separator = splitted_message[1]\x3B\r\n       message = splitted_message[2]\x3B\r\n       let splitted_format = format.split( separator )\x3B\r\n       if(splitted_format.length == 3){\r\n           for(let i = 0\x3B i \x3C 3\x3B i++){ \r\n               if(splitted_format[i].startsWith(\x22Y\x22)){ year_index = i\x3B year_length = splitted_format[i].length\x3B }\r\n               if(splitted_format[i].startsWith(\x22M\x22)){ month_index = i\x3B month_length = splitted_format[i].length\x3B }\r\n               if(splitted_format[i].startsWith(\x22D\x22)){ day_index = i\x3B day_length = splitted_format[i].length\x3B }\r\n          }\r\n       }\r\n   }\r\n\r\n   if(message.trim() == \x27\x27){\r\n\r\n       message = \x27Element \x27 + element.name + \x27 failed my test\x27\x3B\r\n   }\r\n\r\n   if(typeof element.value == \x27undefined\x27 || element.value.trim() == \x27\x27){\r\n\r\n       return message\x3B\r\n   }\r\n\r\n   let splitted_value = element.value.split( separator )\x3B\r\n\r\n   if( splitted_value.length != 3 ){\r\n\r\n      return message\x3B\r\n   }\r\n\r\n   let new_value = splitted_value[year_index] + \x22-\x22 + splitted_value[month_index] + \x22-\x22 + splitted_value[day_index] \x3B\r\n\r\n   // Regular expression used to check if date is in correct format\r\n   let reg = new RegExp(\x22^\x5C\x5Cd{\x22+year_length+\x22}-\x5C\x5Cd{\x22+month_length+\x22}-\x5C\x5Cd{\x22+day_length+\x22}$\x22\x2C\x22g\x22)\x3B\r\n\r\n   if(reg.test(new_value))\r\n   {\r\n      let date_array = new_value.split(\x22-\x22)\x3B\r\n      let day = date_array[2]\x3B\r\n      let month = date_array[1] - 1\x3B\r\n      let year = date_array[0]\x3B\r\n\r\n      if( !bfvdate_isValid(day\x2C month\x2C year) )\r\n      {\r\n         return message\x3B\r\n      }\r\n   }\r\n   else\r\n   {\r\n      return message\x3B\r\n   }\r\n\r\n   return \x27\x27\x3B\r\n}\r\n\r\nfunction bfvdate_daysInMonth(m\x2C y) { // m is 0 indexed: 0-11\r\n    switch (m) {\r\n        case 1 :\r\n            return (y % 4 == 0 \x26\x26 y % 100) || y % 400 == 0 ? 29 : 28\x3B\r\n        case 8 : case 3 : case 5 : case 10 :\r\n            return 30\x3B\r\n        default :\r\n            return 31\r\n    }\r\n}\r\n\r\nfunction bfvdate_isValid(d\x2C m\x2C y) {\r\n    return m \x3E= 0 \x26\x26 m \x3C 12 \x26\x26 d \x3E 0 \x26\x26 d \x3C= bfvdate_daysInMonth(m\x2C y)\x3B\r\n}</code>
	</script>
	<script id="39">
		<package>FF</package>
		<name>ff_validate_date_DDMMYYYY</name>
		<title>Validate Date DD/MM/YYYY format</title>
		<type>Element Validation</type>
		<description>Validates that the date in a textfield is correctly formatted in DD/MM/YYYY format.\r\nCan be used with a textfield element and/or the Calendar element.</description>
		<code>function ff_validate_date_DDMMYYYY(element\x2C message)\r\n{\r\n   // Regular expression used to check if date is in correct format\r\n   var pattern = /[0-3][0-9]\x5C/(0|1)[0-9]\x5C/(19|20)[0-9]{2}/\x3B\r\n   if(pattern.test(element.value))\r\n   {\r\n      var date_array = element.value.split(\x27/\x27)\x3B\r\n      var day = date_array[0]\x3B\r\n\r\n      // Attention! Javascript consider months in the range 0 - 11\r\n      var month = date_array[1] - 1\x3B\r\n      var year = date_array[2]\x3B\r\n\r\n      // This instruction will create a date object\r\n      source_date = new Date(year\x2Cmonth\x2Cday)\x3B\r\n\r\n      if(year != source_date.getFullYear())\r\n      {\r\n         return message == \x27\x27 ? \x27Element \x27 + element.name + \x27 failed my test\x27 : message\x3B\r\n      }\r\n\r\n      if(month != source_date.getMonth())\r\n      {\r\n         return message == \x27\x27 ? \x27Element \x27 + element.name + \x27 failed my test\x27 : message\x3B\r\n      }\r\n\r\n      if(day != source_date.getDate())\r\n      {\r\n         return message == \x27\x27 ? \x27Element \x27 + element.name + \x27 failed my test\x27 : message\x3B\r\n      }\r\n   }\r\n   else\r\n   {\r\n      return message == \x27\x27 ? \x27Element \x27 + element.name + \x27 failed my test\x27 : message\x3B\r\n   }\r\n\r\n   return \x27\x27\x3B\r\n}</code>
	</script>
	<script id="40">
		<package>FF</package>
		<name>ff_validate_form</name>
		<title>Validate form</title>
		<type>Element Action</type>
		<description>Validates the form and displays the result.</description>
		<code>function ff_validate_form(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(0)\x3B\r\n    if (error != \x27\x27) {\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else\r\n        alert(\x27All inputs are valid.\x27)\x3B\r\n} // ff_validate_form</code>
	</script>
	<script id="41">
		<package>FF</package>
		<name>ff_validate_nextpage</name>
		<title>Validate and next page</title>
		<type>Element Action</type>
		<description>Validates the current page\x2C and if everything is ok is switches to the next page.</description>
		<code>function ff_validate_nextpage(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n       if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else {\r\n        ff_switchpage(ff_currentpage+1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B   \r\n    }\r\n} // ff_validate_nextpage</code>
	</script>
	<script id="42">
		<package>FF</package>
		<name>ff_validate_page</name>
		<title>Validate page</title>
		<type>Element Action</type>
		<description>Validates the current page and displays the result.</description>
		<code>function ff_validate_page(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else\r\n        alert(\x27All inputs are valid.\x27)\x3B\r\n} // ff_validate_page</code>
	</script>
	<script id="43">
		<package>FF</package>
		<name>ff_validate_prevpage</name>
		<title>Validate previous page</title>
		<type>Element Action</type>
		<description>Validates the current page and switches to the previous page if all is ok</description>
		<code>function ff_validate_prevpage(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n       if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else{\r\n    	if(ff_currentpage \x3E 1){\r\n	 ff_switchpage(ff_currentpage-1)\x3B\r\n	 self.scrollTo(0\x2C0)\x3B\r\n        }\r\n    }\r\n} // ff_validate_prevpage</code>
	</script>
	<script id="44">
		<package>FF</package>
		<name>ff_validate_submit</name>
		<title>Validate and submit form</title>
		<type>Element Action</type>
		<description>Validates the whole form\x2C and if everything is ok it submits the form.</description>
		<code>function ff_validate_submit(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(0)\x3B\r\n    if (error != \x27\x27) {\r\n\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus()\x3B\r\n    } else\r\n        ff_submitForm()\x3B\r\n} // ff_validate_submit</code>
	</script>
	<script id="45">
		<package>FF</package>
		<name>ff_validate_submit_ajax</name>
		<title>Ajax validate and submit form</title>
		<type>Element Action</type>
		<description>Submits the form and staying on the same page by performing an ajax submit.\r\n\r\nDoes NOT work for legacy modes!</description>
		<code>let bfAjaxSubmitElement = null\x3B\r\n\r\n    function ff_validate_submit_ajax(element\x2C action)\r\n    {\r\n        \r\n        switch (action) {\r\n            case \x27click\x27:\r\n\r\n                bfAjaxSubmitElement = element\x3B\r\n\r\n\r\n                if(JQuery(\x22#bfFileQueue\x22).size() \x3E 0 \x26\x26 typeof bfAjaxObject101 == \x27undefined\x27 \x26\x26 typeof bfReCaptchaLoaded == \x27undefined\x27)\r\n                {\r\n                    bfDoFlashUploadAjax()\x3B\r\n\r\n\r\n                }else{\r\n\r\n                    ff_validate_submitAjax()\x3B\r\n                }\r\n\r\n                break\x3B\r\n            default:\x3B\r\n        } // switch\r\n    }\r\n\r\n    function ff_validate_submitAjax(){\r\n\r\n        if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n            JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n            JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n        }\r\n\r\n        let error = ff_validation(0)\x3B\r\n\r\n        if (error != \x27\x27) {\r\n\r\n            if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n                alert(error)\x3B\r\n            } else {\r\n                bfShowErrors(error)\x3B\r\n            }\r\n            ff_validationFocus()\x3B\r\n\r\n        } else {\r\n\r\n            ff_submitForm()\x3B\r\n\r\n        }\r\n    }\r\n\r\n    function bfDoFlashUploadAjax(element){\r\n        JQuery(\x22#bfSubmitMessage\x22).css(\x22visibility\x22\x2C\x22hidden\x22)\x3B\r\n        JQuery(\x22#bfSubmitMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n        JQuery(\x22#bfSubmitMessage\x22).css(\x22z-index\x22\x2C\x22999999\x22)\x3B\r\n        JQuery(\x22.bfErrorMessage\x22).html(\x22\x22)\x3B\r\n        JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n        for(var i = 0\x3B i \x3C bfUploaderErrorElements.length\x3B i++){\r\n            JQuery(\x22#\x22+bfUploaderErrorElements[i]).html(\x22\x22)\x3B\r\n        }\r\n        bfUploaderErrorElements = []\x3B\r\n        if(ff_validation(0) == \x22\x22){\r\n            try{\r\n                bfFlashUploadInterval = window.setInterval( bfCheckFlashUploadProgressAjax\x2C 1000 )\x3B\r\n                if(bfFlashUploadersLength \x3E 0){\r\n                    JQuery(\x22#bfFileQueue\x22).bfcenter(true)\x3B\r\n                    JQuery(\x22#bfFileQueue\x22).css(\x22visibility\x22\x2C\x22visible\x22)\x3B\r\n                    for( var i = 0\x3B i \x3C bfUploaders.length\x3B i++ ){\r\n                        bfUploaders[i].start()\x3B\r\n                    }\r\n                }\r\n            } catch(e){alert(e)}\r\n        } else {\r\n            if(typeof bfUseErrorAlerts == \x22undefined\x22){\r\n                alert(error)\x3B\r\n            } else {\r\n                bfShowErrors(error)\x3B\r\n            }\r\n            ff_validationFocus(\x22\x22)\x3B\r\n            if(document.getElementById(\x22bfSubmitButton\x22)) {\r\n                document.getElementById(\x22bfSubmitButton\x22).disabled = false\x3B\r\n            }\r\n        }\r\n    }\r\n    function bfCheckFlashUploadProgressAjax(){\r\n        if( JQuery(\x22#bfFileQueue\x22).html() == \x22\x22 ){ // empty indicates that all queues are uploaded or in any way cancelled\r\n            JQuery(\x22#bfFileQueue\x22).css(\x22visibility\x22\x2C\x22hidden\x22)\x3B\r\n            window.clearInterval( bfFlashUploadInterval )\x3B\r\n            if(typeof bfAjaxObject101 != \x27undefined\x27 || typeof bfReCaptchaLoaded != \x27undefined\x27){\r\n                ff_submitForm2()\x3B\r\n            }else{\r\n                ff_validate_submitAjax()\x3B\r\n            }\r\n            JQuery(\x22.bfFlashFileQueueClass\x22).html(\x22\x22)\x3B\r\n            if(bfFlashUploadersLength \x3E 0){\r\n                JQuery(\x22#bfSubmitMessage\x22).bfcenter(true)\x3B\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22visibility\x22\x2C\x22visible\x22)\x3B\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22display\x22\x2C\x22block\x22)\x3B\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22z-index\x22\x2C\x22999999\x22)\x3B\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function bf_ajax_submit(){\r\n\r\n        JQuery.ajax({\r\n            type: \x22POST\x22\x2C\r\n            url: JQuery(bfAjaxSubmitElement).closest(\x22form\x22).attr(\x22action\x22)\x2C\r\n            data: JQuery(bfAjaxSubmitElement).closest(\x22form\x22).serialize()\x2C\r\n            success: function(data)\r\n            {\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22visibility\x22\x2C\x22hidden\x22)\x3B\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n                JQuery(\x22#bfSubmitMessage\x22).css(\x22z-index\x22\x2C\x22999999\x22)\x3B\r\n\r\n                // assuming last page is thank you page\r\n                if(document.getElementById(\x22bfPage\x22 + (ff_currentpage + 1))\r\n                    \x26\x26 document.getElementById(\x22bfPage\x22 + (ff_currentpage + 1)).style.display == \x27none\x27){\r\n\r\n                    ff_switchpage(ff_currentpage + 1)\x3B\r\n\r\n                }\r\n                else{\r\n\r\n                    alert(\x27Successfully submitted\x27)\x3B\r\n                    window.location = window.location.href\x3B\r\n                }\r\n            }\r\n        })\x3B\r\n\r\n    }</code>
	</script>
	<script id="46">
		<package>FF</package>
		<name>ff_validemail</name>
		<title>Valid email</title>
		<type>Element Validation</type>
		<description>Validate entry of a valid email (syntax check only)</description>
		<code>function ff_validemail(element\x2C message)\r\n{\r\n    var check =\r\n    /^([a-zA-Z0-9_\x5C.\x5C-])+\x5C@(([a-zA-Z0-9\x5C-])+\x5C.)+([a-zA-Z0-9]{2\x2C4})+$/\x3B\r\n    if (!check.test(element.value)){\r\n        if (message==\x27\x27) message = element.name+\x22 is no valid email address.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n    return \x27\x27\x3B\r\n} // ff_validemail</code>
	</script>
	<script id="47">
		<package>FF</package>
		<name>ff_validemail_repeat</name>
		<title>Validate Email repeat</title>
		<type>Element Validation</type>
		<description>Checks if the field value is a valid email address and has a second counterpart that has an equal value.\r\nThe 2nd email field must be named \x22FIELDNAME_repeat\x22!</description>
		<code>function ff_validemail_repeat(element\x2C message)\r\n{\r\n    var check =\r\n    /^([a-zA-Z0-9_\x5C.\x5C-])+\x5C@(([a-zA-Z0-9\x5C-])+\x5C.)+([a-zA-Z0-9]{2\x2C4})+$/\x3B\r\n    if (!check.test(element.value)){\r\n        if (message==\x27\x27) message = element.name+\x22 is no valid email address.\x5Cn\x22\x3B\r\n        ff_validationFocus(element.name)\x3B\r\n        return message\x3B\r\n    } // if\r\n	\r\n    try{\r\n	    var repeat = element.name.split(\x22ff_nm_\x22)[1].split(\x22[]\x22)[0]\x3B\r\n	\r\n	    if(!ff_getElementByName(repeat + \x27_repeat\x27)){\r\n	     	if (message==\x27\x27) message = repeat+\x22 has no repeat email field.\x5Cn\x22\x3B\r\n	        ff_validationFocus(element.name)\x3B\r\n	        return message\x3B\r\n	    } else {\r\n	        if(ff_getElementByName(repeat + \x27_repeat\x27).value != element.value){\r\n	           if (message==\x27\x27) message = element.name+\x22 and \x22 + repeat + \x22_repeat do not match.\x5Cn\x22\x3B\r\n	           ff_validationFocus(repeat + \x27_repeat\x27)\x3B\r\n	           return message\x3B\r\n	        }\r\n	    }\r\n    }catch(e){\r\n        return e.description\x3B\r\n    }\r\n\r\n    return \x27\x27\x3B\r\n} // ff_validemail</code>
	</script>
	<script id="48">
		<package>FF</package>
		<name>ff_valuenotempty</name>
		<title>Value not empty</title>
		<type>Element Validation</type>
		<description>Validate that value is not empty.</description>
		<code>function ff_valuenotempty(element\x2C message)\r\n{\r\n    if (element.value!=\x27\x27) return \x27\x27\x3B \r\n    if (message==\x27\x27) message = \x22Please enter \x22+element.name+\x22.\x5Cn\x22\x3B\r\n    ff_validationFocus(element.name)\x3B\r\n    return message\x3B\r\n} // ff_valuenotempty</code>
	</script>
	<script id="61">
		<package>FF</package>
		<name>ff_selectedValuesCheckboxes</name>
		<title>ff_selectedValuesCheckboxes</title>
		<description>Get selected values as Checkboxes\r\nGet values of selected Checkboxes as list:\r\n\r\nx = ff_selectedValuesCheckboxes(\x27myselectlist\x27)\x3B\r\n// x = green\x2Cred</description>
		<code>// XDA : 6/1/2025 \r\nfunction ff_selectedValuesCheckboxes(name) {\r\n    // Sélectionner les checkboxes avec le nom spécifié et qui sont cochées\r\n    var checkboxes = document.querySelectorAll(\x27input[name=\x22ff_nm_\x27 + name + \x27[]\x22]:checked\x27)\x3B\r\n\r\n    // Vérifier s\x27il y a des checkboxes sélectionnées\r\n    if (checkboxes.length === 0) {\r\n        console.warn(\x22Aucune case sélectionnée pour le nom: \x22 + name)\x3B\r\n        return \x27\x27\x3B // Retourner une chaîne vide si aucune case n\x27est sélectionnée\r\n    }\r\n\r\n    // Récupérer les valeurs sélectionnées\x2C supprimer les espaces superflus\x2C et les joindre par des virgules\r\n    return Array.from(checkboxes)\r\n        .map((checkbox) =\x3E checkbox.value.trim()) // Utilisation de trim pour éliminer les espaces\r\n        .join(\x27\x2C\x27)\x3B\r\n} // ff_selectedValuesCheckboxes</code>
	</script>	
	<script id="49">
		<package>GN</package>
		<name>gn_annuler</name>
		<title>Annuler \x26 Home Page</title>
		<type>Element Action</type>
		<description>Cancel and go to site Home page</description>
		<code>function gn_annuler(element\x2C action) {\r\n    var url = location.href\x3B // Lit l\x27URL\r\n    var website = location.origin\x3B // retourne host.com\r\n\r\n    var pos = url.indexOf(\x22/\x22\x2C website.length + 1) \x3B // -1 si pas de sous-domaine ou position du /\r\n\r\n    if (pos \x3E 0) {\r\n        // Retourne le nom de sous-domaine\r\n        url = url.substr(0\x2C pos) \x3B\r\n    }\r\n    // Note si pos = négatif\x2C Pas de sous domaine\r\n  location.href = url \x3B // sortie au nom de domaine ou sous domaine\r\n\r\n} // gn_annuler</code>
	</script>
	<script id="50">
		<package>GN</package>
		<name>gn_annuler</name>
		<title>Annuler \x26 Home Page</title>
		<type>Element Action</type>
		<description>Cancel and go to site Home page</description>
		<code>function gn_annuler(element\x2C action) {\r\n    var url = location.href\x3B // Lit l\x27URL\r\n    var website = location.origin\x3B // retourne host.com\r\n\r\n    var pos = url.indexOf(\x22/\x22\x2C website.length + 1) \x3B // -1 si pas de sous-domaine ou position du /\r\n\r\n    if (pos \x3E 0) {\r\n        // Retourne le nom de sous-domaine\r\n        url = url.substr(0\x2C pos) \x3B\r\n    }\r\n    // Note si pos = négatif\x2C Pas de sous domaine\r\n  location.href = url \x3B // sortie au nom de domaine ou sous domaine\r\n\r\n} // gn_annuler</code>
	</script>
	<script id="51">
		<package>GN</package>
		<name>gn_annuler_cyclo</name>
		<title>Annuler \x26 Cyclo Home Page</title>
		<type>Element Action</type>
		<description>Cancel and go to site \x22VCMB Cyclo\x22 Home page</description>
		<code>function gn_annuler_cyclo(element\x2C action)\r\n{\r\n  eval(\x27document.\x27+ff_processor.form_id).reset()\x3B\r\n  window.location.href = \x22https://cyclo.vcmb.fr\x22\x3B\r\n \r\n} // gn_annuler_cyclo</code>
	</script>
	<script id="52">
		<package>GN</package>
		<name>gn_annuler_cyclo</name>
		<title>Annuler \x26 Cyclo Home Page</title>
		<type>Element Action</type>
		<description>Cancel and go to site \x22VCMB Cyclo\x22 Home page</description>
		<code>function gn_annuler_cyclo(element\x2C action)\r\n{\r\n  eval(\x27document.\x27+ff_processor.form_id).reset()\x3B\r\n  window.location.href = \x22https://cyclo.vcmb.fr\x22\x3B\r\n \r\n} // gn_annuler_cyclo</code>
	</script>
	<script id="53">
		<package>GN</package>
		<name>gn_page_fin</name>
		<title>Page FIN (Last - 1)</title>
		<type>Element Action</type>
		<description>Go to last page - 1 (Submit page\x2C before Thanks Page)</description>
		<code>function gn_page_fin(element\x2C action)\r\n{\r\n    ff_switchpage(ff_lastpage-1)\x3B\r\n} // gn_page_fin</code>
	</script>
	<script id="54">
		<package>GN</package>
		<name>gn_page_fin</name>
		<title>Page FIN (Last - 1)</title>
		<type>Element Action</type>
		<description>Go to last page - 1 (Submit page\x2C before Thanks Page)</description>
		<code>function gn_page_fin(element\x2C action)\r\n{\r\n    ff_switchpage(ff_lastpage-1)\x3B\r\n} // gn_page_fin</code>
	</script>
	<script id="55">
		<package>GN</package>
		<name>gn_page4</name>
		<title>Page 4</title>
		<type>Element Action</type>
		<description>Switches to page 4.</description>
		<code>function gn_page4(element\x2C action)\r\n{\r\n    if (ff_lastpage \x3E= 4) ff_switchpage(4)\x3B\r\n} // gn_page4</code>
	</script>
	<script id="56">
		<package>GN</package>
		<name>gn_page4</name>
		<title>Page 4</title>
		<type>Element Action</type>
		<description>Switches to page 4.</description>
		<code>function gn_page4(element\x2C action)\r\n{\r\n    if (ff_lastpage \x3E= 4) ff_switchpage(4)\x3B\r\n} // gn_page4</code>
	</script>
	<script id="57">
		<package>GN</package>
		<name>gn_validate_page_fin</name>
		<title>Validate and FIN page</title>
		<type>Element Action</type>
		<description>Validates the current page\x2C and if everything is ok is switches to Submit page (Last -1)\x2C before Thanks you page.</description>
		<code>function gn_validate_page_fin(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n       if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           swal(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else {\r\n        ff_switchpage(ff_lastpage-1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B   \r\n    }\r\n} // gn_validate_page_fin</code>
	</script>
	<script id="58">
		<package>GN</package>
		<name>gn_validate_page_fin</name>
		<title>Validate and FIN page</title>
		<type>Element Action</type>
		<description>Validates the current page\x2C and if everything is ok is switches to Submit page (Last -1)\x2C before Thanks you page.</description>
		<code>function gn_validate_page_fin(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n       if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           swal(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else {\r\n        ff_switchpage(ff_lastpage-1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B   \r\n    }\r\n} // gn_validate_page_fin</code>
	</script>
	<script id="59">
		<package>GN</package>
		<name>gn_validate_submit</name>
		<title>Validate and submit form (SPAM)</title>
		<type>Element Action</type>
		<description>Add ANTI-SPAM test before to validate the form. \r\nTest if Nom = Prenom. before submitting the form.\r\nIf NOM = PRENOM \x3E\x3E Attaques classique des .ru (2021)\r\nMise à jour sept. 2021 (Gil)</description>
		<code>function gn_validate_submit(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(0)\x3B\r\n    if (error != \x27\x27) {\r\n\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus()\x3B\r\n    } else {\r\n	// Vérif SPAM si le NOM et PRENOM sont différents = OK\r\n	nom = ff_getElementByName(\x22Nom\x22).value \x3B\r\n	prenom = ff_getElementByName(\x22Prenom\x22).value \x3B\r\n		\r\n	// Minuscule\x2C puis enlève les espaces de Début et de Fin\r\n	nom =nom.toLowerCase().trim() \x3B\r\n	prenom = prenom.toLowerCase().trim() \x3B\r\n\r\n	// SPAM si le Nom = Prénom ou si le Prénom commence par le Nom (Gil \x3E Gil-André)\r\n	if ( prenom.search(nom) == 0 ){\r\n		// Tentative de SPAM\x2C Sortie Page d\x27accueil Cyclo\r\n		gn_annuler_cyclo() \x3B\r\n	} else {\r\n		// Nom et Prénom OK\x2C Submit Formulaire\r\n		ff_submitForm() \x3B \r\n		}\r\n	}	\r\n} // gn_validate_submit</code>
	</script>
	<script id="60">
		<package>GN</package>
		<name>gn_validate_submit</name>
		<title>Validate and submit form (SPAM)</title>
		<type>Element Action</type>
		<description>Add ANTI-SPAM test before to validate the form. \r\nTest if Nom = Prenom. before submitting the form.\r\nIf NOM = PRENOM \x3E\x3E Attaques classique des .ru (2021)\r\nMise à jour sept. 2021 (Gil)</description>
		<code>function gn_validate_submit(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(0)\x3B\r\n    if (error != \x27\x27) {\r\n\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus()\x3B\r\n    } else {\r\n	// Vérif SPAM si le NOM et PRENOM sont différents = OK\r\n	nom = ff_getElementByName(\x22Nom\x22).value \x3B\r\n	prenom = ff_getElementByName(\x22Prenom\x22).value \x3B\r\n		\r\n	// Minuscule\x2C puis enlève les espaces de Début et de Fin\r\n	nom =nom.toLowerCase().trim() \x3B\r\n	prenom = prenom.toLowerCase().trim() \x3B\r\n\r\n	// SPAM si le Nom = Prénom ou si le Prénom commence par le Nom (Gil \x3E Gil-André)\r\n	if ( prenom.search(nom) == 0 ){\r\n		// Tentative de SPAM\x2C Sortie Page d\x27accueil Cyclo\r\n		gn_annuler_cyclo() \x3B\r\n	} else {\r\n		// Nom et Prénom OK\x2C Submit Formulaire\r\n		ff_submitForm() \x3B \r\n		}\r\n	}	\r\n} // gn_validate_submit</code>
	</script>
	<piece id="1">
		<package>FF</package>
		<name>ff_addCustomCSSFile</name>
		<title>Add custom CSS File</title>
		<type>Before Form</type>
		<description>Adds a custom css file to the form. To choose a css file\x2C execute this piece and call the function ff_addCustomCSSFile(\x27path/to/css/file\x27) with the RELATIVE (not full!) path to your joomla installation.\r\nDo not forget to call $this-\x3EexecPieceByName(\x27ff_InitLib\x27) before!\r\n\r\nExample:\r\n\r\nglobal $mainframe\x3B\r\n\r\n$this-\x3EexecPieceByName(\x27ff_InitLib\x27)\x3B\r\n$this-\x3EexecPieceByName(\x27ff_addCustomCSSFile\x27)\x3B\r\n\r\nff_addCustomCSSFile(\x27templates/\x27 . $mainframe-\x3EgetTemplate() . \x27/css/template.css\x27)\x3B</description>
		<code>function ff_addCustomCSSFile($path){\r\n	if (file_exists(JPATH_SITE . \x27/\x27 . $path)){\r\n		Joomla\x5CCMS\x5CFactory::getDocument()-\x3EaddStyleSheet(Joomla\x5CCMS\x5CUri\x5CUri::root() . $path)\x3B\r\n	}\r\n}</code>
	</piece>
	<piece id="2">
		<package>FF</package>
		<name>ff_Constants</name>
		<title>Constants definitions</title>
		<type>Before Form</type>
		<description>Library constants definitions</description>
		<code>define(\x27FF_DIE\x27\x2C       \x27_ff_die_on_errors_\x27)\x3B\r\ndefine(\x27FF_DONTDIE\x27\x2C   \x27_ff_stay_alive_\x27)\x3B\r\ndefine(\x27FF_IGNOREDIE\x27\x2C \x27_ff_ignore_if_dying_\x27)\x3B\r\n\r\ndefine(\x27FF_ARRAY\x27\x2C     \x27_ff_return_as_array_\x27)\x3B\r\ndefine(\x27FF_LIST\x27\x2C      \x27_ff_return_as_list_\x27)\x3B\r\ndefine(\x27FF_SLIST\x27\x2C     \x27_ff_return_as_slist_\x27)\x3B\r\ndefine(\x27FF_DLIST\x27\x2C     \x27_ff_return_as_dlist_\x27)\x3B\r\n\r\ndefine(\x27FF_NOTRIM\x27\x2C    1)\x3B\r\ndefine(\x27FF_ALLOWHTML\x27\x2C 2)\x3B\r\ndefine(\x27FF_ALLOWRAW\x27\x2C  4)\x3B</code>
	</piece>
	<piece id="3">
		<package>FF</package>
		<name>ff_databaseToSelect</name>
		<title>ff_databaseToSelect</title>
		<type>Before Form</type>
		<description>Populates a select field with database stuff. Use like so:\r\n\r\ndatabaseToSelect($select\x2C $table\x2C $label\x2C $value\x2C $sql)\x3B\r\n\r\n$label and $value are fields you want to display as label and value in select options. $table\r\nis the name of the table you want to look for. $select is the name of the select input. $sql holds custom SQL query\x2C if supplied. If not\x2C\r\nfunction will perform a simple \x27SELECT $label\x2C $valueFROM $table\x27\x3B\r\n\r\nexample\x3B databaseToSelect(\x27mySelect\x27\x2C \x27users\x27\x2C \x27name\x27\x2C \x27ID)\x3B</description>
		<code>function ff_databaseToSelect($st\x2C $tbl\x2C $lbl\x2C $val\x2C $sql)\r\n{\r\n	$db = BFFactory::getDBO()\x3B	// Get Database Object\r\n	global $ff_processor\x3B\r\n\r\n	// Create your own query here\r\n	if ($sql and $sql != \x27\x27){\r\n		$db-\x3EsetQuery($sql)\x3B\r\n	}else{\r\n		$db-\x3EsetQuery(\x22SELECT $lbl\x2C $val FROM $tbl\x22)\x3B\r\n	}\r\n	\r\n\r\n	try {\r\n		$result = $db-\x3EloadObjectList()\x3B // Load the result from the query\r\n	} catch (\x5CException $e) {\r\n		Factory::getApplication()-\x3EenqueueMessage($e-\x3EgetMessage())\x2C \x27error\x27\x3B\r\n		return\x3B\r\n	)\r\n \r\n	$values = []\x3B\r\n	foreach($result as $rrow){\r\n		$values[]=(object)array(\x27selected\x27=\x3E0\x2C \x27label\x27=\x3E$rrow-\x3E{$lbl}\x2C \x27value\x27=\x3E$rrow-\x3E{$val})\x3B\r\n	}\r\n	\r\n	unset($rrow)\x3B\r\n	\r\n	foreach($ff_processor-\x3Erows as $row)\r\n	{\r\n		if ($row-\x3Ename==$st){\r\n			$row-\x3EselectList = $values\x3B\r\n			foreach($values as $var){\r\n				$row-\x3Edata2 .= $var-\x3Eselected.\x22\x3B\x22.$var-\x3Elabel.\x22\x3B\x22.$var-\x3Evalue.\x22\x5Cn\x22\x3B\r\n			}\r\n			break\x3B\r\n		}\r\n		unset($row)\x3B\r\n	}\r\n}</code>
	</piece>
	<piece id="4">
		<package>FF</package>
		<name>ff_die</name>
		<title>Terminate form gracefully</title>
		<description>Gracefully terminates the form and shows a message plus optionally a \r\nCONTINUE button for further redirection.\r\n\r\nCall:\r\n\r\n    ff_die($message=null\x2C $action=\x27stop\x27\x2C $target=\x27\x27\x2C $params=\x27\x27\x2C $label=\x27Continue\x27)\x3B\r\n    return\x3B\r\n\r\n    $message = A message to display. If no message is provided\x2C it will\r\n               display:\r\n\r\n                    Fatal error in $formname\x2C processing stopped.\r\n\r\n    $action  = \x27stop\x27 : Dont show a CONTINUE button (default)\r\n               \x27self\x27 : Redirect to the same form\r\n               \x27form\x27 : Redirect to another form \r\n               \x27page\x27 : Redirect to another page of this site\r\n               \x27home\x27 : Redirect to homepage of the site\r\n               \x27url\x27  : Redirect to a url\r\n\r\n    $target  = Target name/url for \x27form\x27\x2C \x27page\x27 and \x27url\x27\r\n\r\n    $params  = Additional parameters for \x27self\x27 and \x27form\x27\r\n\r\n    $label   = Text for the continue button\r\n\r\nExamples:\r\n\r\n    // Display standard message without continue button\r\n    ff_die()\x3B \r\n\r\n    // Display message without continue button\r\n    ff_die(\x27Sorry\x2C cannot continue for some reason.\x27)\x3B\r\n\r\n    // Display standard message and return to same form with a parameter\r\n    ff_die(null\x2C \x27self\x27\x2C \x27\x26ff_param_foo=bar\x27)\x3B\r\n\r\n    // Redirect to another form\r\n    ff_die(\x27Guess you are hungry now...\x27\x2C \x27form\x27\x2C \x27SamplePizzaShop\x27\x2C null\x2C \x27Order\x27)\x3B\r\n\r\n    // Redirect to another site page\r\n    ff_die(\r\n        \x27Something strange has happened!\x27\x2C \r\n        \x27page\x27\x2C \r\n        \x27index.php?option=com_content\x26task=section\x26id=1\x26Itemid=2\x27\r\n    )\x3B</description>
		<code>function ff_die($message=\x27\x27\x2C $action=\x27stop\x27\x2C $target=\x27\x27\x2C $params=\x27\x27\x2C $label=\x27Continue\x27)\r\n{\r\n    global $ff_processor\x3B\r\n    if ($ff_processor-\x3Edying) return\x3B\r\n\r\n    ob_end_clean()\x3B\r\n    $form =\x26 $ff_processor-\x3Eformrow\x3B\r\n    if (!$message) \r\n        $message = \r\n            \x22\x3Cstrong\x3EFatal error in $form-\x3Ename\x2C form processing halted.\x3C/strong\x3E\x22\x3B\r\n    switch ($action) {\r\n        case \x27self\x27: $url = ff_makeSelfUrl($params)\x3B break\x3B\r\n        case \x27form\x27: $url = ff_makeFormUrl($target\x2C $params)\x3B break\x3B\r\n        case \x27page\x27: $url = ff_makePageUrl($target)\x3B break\x3B\r\n        case \x27home\x27: $url = \x22{mossite}\x22\x3B break\x3B\r\n        case \x27url\x27 : $url = $target\x3B break\x3B\r\n        default    : $url = \x27\x27\x3B\r\n    } // switch\r\n  \r\n    if ($form-\x3Eclass1 != \x27\x27) echo \x27\x3Cdiv class=\x22\x27.$form-\x3Eclass1.\x27\x22\x3E\x27.nl()\x3B\r\n    echo($message.\x27\x3Cbr/\x3E\x3Cbr/\x3E\x3Cbr/\x3E\x27.nl())\x3B\r\n\r\n      if ($url) {\r\n        if (!$ff_processor-\x3Einline) echo \x27\x3Cform action=\x22#redirect\x22\x3E\x27.nl()\x3B\r\n        if ($ff_processor-\x3Einframe) $t = \x27parent\x27\x3B else $t = \x27document\x27\x3B\r\n        echo \x27\x3Cinput type=\x22button\x22 class=\x22button\x22 value=\x22\x27.$label.\x27\x22\x27.\r\n             \x27 onClick=\x22\x27.$t.\x27.location.href=\x5C\x27\x27.htmlentities($url\x2CENT_QUOTES).\x27\x5C\x27\x3B\x22\x27.\r\n             \x27/\x3E\x27.nl()\x3B\r\n        if (!$ff_processor-\x3Einline) echo \x27\x3C/form\x3E\x27.nl()\x3B\r\n    } // if\r\n    if ($form-\x3Eclass1 != \x27\x27) echo \x27\x3C/div\x3E\x27.nl()\x3B\r\n    unset($form)\x3B\r\n    ob_start()\x3B\r\n    $ff_processor-\x3Esuicide()\x3B\r\n} // ff_die</code>
	</piece>
	<piece id="5">
		<package>FF</package>
		<name>ff_DisableFormTrace</name>
		<title>Disable tracing at view time</title>
		<type>Before Form</type>
		<description>Disables tracing for use as before form piece</description>
		<code>//+trace dis</code>
	</piece>
	<piece id="6">
		<package>FF</package>
		<name>ff_DisableSubmitTrace</name>
		<title>Disable tracing at submit time</title>
		<type>Begin Submit</type>
		<description>Disables tracing for use as begin submit piece</description>
		<code>//+trace dis</code>
	</piece>
	<piece id="7">
		<package>FF</package>
		<name>ff_dying</name>
		<title>Query live status</title>
		<description>Query if form is dying</description>
		<code>//+trace max none\r\nfunction ff_dying()\r\n{\r\n    global $ff_processor\x3B \r\n    return $ff_processor-\x3Edying\x3B\r\n} // ff_dying</code>
	</piece>
	<piece id="8">
		<package>FF</package>
		<name>ff_expString</name>
		<title>String export</title>
		<description>Export string function: escapes special characters in c-codes</description>
		<code>function ff_expString($text)\r\n{\r\n    return expstring($text)\x3B\r\n} // ff_expString</code>
	</piece>
	<piece id="9">
		<package>FF</package>
		<name>ff_getPageByNameX</name>
		<title>Get page # by element name</title>
		<description>Gets the page number by the name of an element. \r\nTypically used to redirect to a certain page in a before form piece \r\nas \r\n\r\n    $this-\x3Epage = ff_getPageByName(\x27elementname\x27)\x3B</description>
		<code>function ff_getPageByName($name)\r\n{\r\n    global $ff_processor\x3B\r\n    foreach($ff_processor-\x3Erows as $row)\r\n        if ($row-\x3Ename==$name)\r\n            return $row-\x3Epage\x3B\r\n    return null\x3B\r\n} // ff_getPageByName</code>
	</piece>
	<piece id="10">
		<package>FF</package>
		<name>ff_getParam</name>
		<title>Get GET/POST parameter</title>
		<description>Direct replacement for mosGetParam. ff_getParam will attempt to filter \r\nout parameters that are targeted to another form on the same page.</description>
		<code>function ff_getParam($name\x2C $default=null\x2C $mask=0)\r\n{\r\n    global $ff_request\x3B\r\n    if (substr($name\x2C0\x2C9)==\x27ff_param_\x27) {\r\n        if (!isset($ff_request[$name])) return $default\x3B\r\n        $val = $ff_request[$name]\x3B\r\n    } else {\r\n        if (!isset($_REQUEST[$name])) return $default\x3B\r\n        $val = $_REQUEST[$name]\x3B\r\n    } // if\r\n    $dotrim = ($mask \x26 FF_NOTRIM)==0\x3B\r\n    $dostrp = ($mask \x26 FF_ALLOWHTML)==0\x3B\r\n    $addsla = ($mask \x26 FF_ALLOWRAW)==0\x3B\r\n    $remsla = ($mask \x26 FF_ALLOWRAW)!=0\x3B\r\n    if (is_array($val)) {\r\n        $cnt = count($val)\x3B\r\n        for ($v = 0\x3B $v \x3C $cnt\x3B $v++)\r\n            if (is_string($val[$v])) {\r\n                if ($dotrim) $val[$v] = trim($val[$v])\x3B\r\n                if ($dostrp) $val[$v] = strip_tags($val[$v])\x3B\r\n                if ($addsla) $val[$v] = addslashes($val[$v])\x3B\r\n                if ($remsla) $val[$v] = stripslashes($val[$v])\x3B\r\n            } // if\r\n    } else {\r\n        if (is_string($val)) {\r\n            if ($dotrim) $val = trim($val)\x3B\r\n            if ($dostrp) $val = strip_tags($val)\x3B\r\n            if ($addsla) $val = addslashes($val)\x3B\r\n            if ($remsla) $val = stripslashes($val)\x3B\r\n        } // if\r\n    } // if\r\n    return $val\x3B\r\n} // ff_getParam</code>
	</piece>
	<piece id="11">
		<package>FF</package>
		<name>ff_getSubmit</name>
		<title>Get submited data</title>
		<description>Returns submitdata either as scalar\x2C array or list. In case of list the values\r\nare returned as a string with the values concatenated by comma.\r\n\r\nExamples:\r\n\r\n// Get as scalar: Optionally pass a default value as second parameter.\r\n// If no default is provided\x2C it will return NULL if no value was submitted\r\n\r\n    $myval = ff_getSubmit(\x27myvar\x27)\x3B        // return NULL if not submitted\r\n\r\n    $myval = ff_getSubmit(\x27myvar\x27\x2C1)\x3B      // return 1 if not submitted\r\n\r\n    $myval = ff_getSubmit(\x27myvar\x27\x2C\x27foo\x27)\x3B  // return \x27foo\x27 if not submitted\r\n\r\n    ff_query(\r\n        \x22insert into #__mytable(id\x2C name) \x22.\r\n        \x22values (\x27\x22.\r\n            ff_getSubmit(\x27id\x27).\x22\x2C \x22.\r\n            ff_getSubmit(\x27name\x27\x2C\x27unknown\x27).\r\n        \x22\x27)\x22\r\n    )\x3B\r\n\r\n// Get as array: Pass FF_ARRAY as second Parameter\r\n\r\n    $myarr = $ff_getSubmit(\x27myarr\x27\x2C FF_ARRAY)\x3B\r\n\r\n    foreach ($myarr as $myval) ...\r\n\r\n// Get as list: Pass either FF_LIST\x2C FF_SLIST or FF_DLIST as 2nd parameter.\r\n\r\n    // FF_LIST will return numeric data unquoted and strings in single quotes:\r\n    //    1\x2C2\x2C\x27a\x27\x2C4\r\n\r\n    // FF_SLIST will return all data single quoted:\r\n    //    \x271\x27\x2C\x272\x27\x2C\x27a\x27\x2C\x274\x27\r\n\r\n    // FF_DLIST will return all data double quoted:\r\n    //    \x221\x22\x2C\x222\x22\x2C\x22a\x22\x2C\x224\x22\r\n\r\n    ff_query(\r\n        \x22delete from #__mytable \x22.\r\n        \x22where id in (\x22.ff_getSubmit(\x27itemlist\x27\x2CFF_LIST).\x22)\x22\r\n    )\x3B</description>
		<code>function ff_getSubmit($name\x2C $default=null)\r\n{\r\n    global $ff_processor\x3B\r\n\r\n    switch ((string)$default) {\r\n        case FF_ARRAY: $value = array()\x3B break\x3B\r\n        case FF_LIST : \r\n        case FF_SLIST:\r\n        case FF_DLIST: $value = \x27\x27\x3B break\x3B\r\n        default      : $value = $default\x3B\r\n    } // switch\r\n    foreach ($ff_processor-\x3Esubmitdata as $data)\r\n        if ($data[_FF_DATA_NAME]==$name) {\r\n            $q = \x27\x27\x3B\r\n            switch ((string)$default) {\r\n                case FF_ARRAY:\r\n                    $value[] = $data[_FF_DATA_VALUE]\x3B\r\n                    break\x3B\r\n                case FF_SLIST:\r\n                    $q = \x22\x27\x22\x3B\r\n                case FF_DLIST:\r\n                    if ($q==\x27\x27) $q = \x27\x22\x27\x3B\r\n                case FF_LIST:\r\n                    if ($q==\x27\x27 \x26\x26 !is_numeric($data[_FF_DATA_VALUE])) $q = \x22\x27\x22\x3B\r\n                    if ($value!=\x27\x27) $value.=\x27\x2C\x27\x3B\r\n                    $value .= $q.$data[_FF_DATA_VALUE].$q\x3B\r\n                    break\x3B\r\n                default:\r\n                    return $data[_FF_DATA_VALUE]\x3B\r\n            } // switch\r\n         } // if\r\n    return $value\x3B\r\n} // ff_getSubmit</code>
	</piece>
	<piece id="12">
		<package>FF</package>
		<name>ff_impString</name>
		<title>String import</title>
		<description>Import string function: unescapes c-coded characters of a string</description>
		<code>function ff_impString($text)\r\n{\r\n    return impstring($text)\x3B\r\n} // ff_impString</code>
	</piece>
	<piece id="13">
		<package>FF</package>
		<name>ff_InitLib</name>
		<title>Init Library</title>
		<type>Before Form</type>
		<description>A collection of useful functions for use in form pieces. \r\n\r\nInclude by: \r\n\r\n    $this-\x3EexecPieceByName(\x27ff_InitLib\x27)\x3B</description>
		<code>//+trace high none\r\nif (!defined(\x27FF_DIE\x27))                    $this-\x3EexecPieceByName(\x27ff_Constants\x27)\x3B\r\nif (!function_exists(\x27ff_expstring\x27))      $this-\x3EexecPieceByName(\x27ff_expstring\x27)\x3B\r\nif (!function_exists(\x27ff_makePageUrl\x27))    $this-\x3EexecPieceByName(\x27ff_makePageUrl\x27)\x3B\r\nif (!function_exists(\x27ff_makeFormUrl\x27))    $this-\x3EexecPieceByName(\x27ff_makeFormUrl\x27)\x3B\r\nif (!function_exists(\x27ff_makeSelfUrl\x27))    $this-\x3EexecPieceByName(\x27ff_makeSelfUrl\x27)\x3B\r\nif (!function_exists(\x27ff_die\x27))            $this-\x3EexecPieceByName(\x27ff_die\x27)\x3B\r\nif (!function_exists(\x27ff_dying\x27))          $this-\x3EexecPieceByName(\x27ff_dying\x27)\x3B\r\nif (!function_exists(\x27ff_redirect\x27))       $this-\x3EexecPieceByName(\x27ff_redirect\x27)\x3B\r\nif (!function_exists(\x27ff_redirectParent\x27)) $this-\x3EexecPieceByName(\x27ff_redirectParentX\x27)\x3B\r\nif (!function_exists(\x27ff_redirectPage\x27))   $this-\x3EexecPieceByName(\x27ff_redirectPage\x27)\x3B\r\nif (!function_exists(\x27ff_redirectForm\x27))   $this-\x3EexecPieceByName(\x27ff_redirectForm\x27)\x3B\r\nif (!function_exists(\x27ff_redirectSelf\x27))   $this-\x3EexecPieceByName(\x27ff_redirectSelf\x27)\x3B\r\nif (!function_exists(\x27ff_setChecked\x27))     $this-\x3EexecPieceByName(\x27ff_setCheckedX\x27)\x3B\r\nif (!function_exists(\x27ff_setSelected\x27))    $this-\x3EexecPieceByName(\x27ff_setSelectedX\x27)\x3B\r\nif (!function_exists(\x27ff_setValue\x27))       $this-\x3EexecPieceByName(\x27ff_setValueX\x27)\x3B\r\nif (!function_exists(\x27ff_getPageByName\x27))  $this-\x3EexecPieceByName(\x27ff_getPageByNameX\x27)\x3B\r\nif (!function_exists(\x27ff_getParam\x27))       $this-\x3EexecPieceByName(\x27ff_getParam\x27)\x3B\r\nif (!function_exists(\x27ff_getSubmit\x27))      $this-\x3EexecPieceByName(\x27ff_getSubmit\x27)\x3B\r\nif (!function_exists(\x27ff_impString\x27))      $this-\x3EexecPieceByName(\x27ff_impString\x27)\x3B\r\nif (!function_exists(\x27ff_expString\x27))      $this-\x3EexecPieceByName(\x27ff_expString\x27)\x3B\r\nif (!function_exists(\x27ff_securityImage\x27))  $this-\x3EexecPieceByName(\x27ff_securityImage\x27)\x3B\r\nif (!function_exists(\x27ff_select\x27))         $this-\x3EexecPieceByName(\x27ff_select\x27)\x3B\r\nif (!function_exists(\x27ff_selectValue\x27))    $this-\x3EexecPieceByName(\x27ff_selectValue\x27)\x3B\r\nif (!function_exists(\x27ff_query\x27))          $this-\x3EexecPieceByName(\x27ff_query\x27)\x3B\r\nif (!function_exists(\x27ff_markdown\x27))       $this-\x3EexecPieceByName(\x27ff_markdown\x27)\x3B</code>
	</piece>
	<piece id="14">
		<package>FF</package>
		<name>ff_makeFormUrl</name>
		<title>Make URL to other form</title>
		<description>Redirects to another facile form. \r\n\r\nCall: \r\n    $url = ff_makeFormUrl($name\x2C $params = \x27\x27)\x3B\r\n\r\nExample:\r\n\r\n    $url = ff_makeFormUrl(\r\n       \x27OtherForm\x27\x2C \r\n       \x27\x26ff_param_email=\x27.urlencode($email)\r\n    )\x3B</description>
		<code>function ff_makeFormUrl($name\x2C $params=\x27\x27)\r\n{\r\n    global $ff_processor\x2C $ff_otherparams\x3B\r\n    $url = \x27\x27\x3B\r\n    switch ($ff_processor-\x3Erunmode) {\r\n        case 2: // preview\r\n        case 1: // backend\r\n            $url .= \x27administrator/index2.php?option=com_breezingforms\x26act=run\x27.\r\n                    \x27\x26ff_name=\x27.urlencode($name)\x3B\r\n            if ($ff_processor-\x3Einframe) $url .= \x27\x26ff_frame=1\x27\x3B\r\n            if ($ff_processor-\x3Eborder) $url .= \x27\x26ff_border=1\x27\x3B\r\n            break\x3B\r\n        default: // frontend\r\n            $url .= \x27index.php?ff_name=\x27.urlencode($name)\x3B\r\n            if ($ff_otherparams[\x27option\x27] == \x27com_breezingforms\x27) {\r\n                reset($ff_otherparams)\x3B\r\n                foreach(  $ff_otherparams as $prop =\x3E $val)\r\n                    $url .= \x27\x26\x27.urlencode($prop).\x27=\x27.urlencode($val)\x3B\r\n            } else\r\n                $url .= \x27\x26option=com_breezingforms\x27\x3B\r\n            if ($ff_processor-\x3Etarget \x3E 1) $url .= \x27\x26ff_target=\x27.$ff_processor-\x3Etarget\x3B\r\n            if ($ff_processor-\x3Einframe) $url .= \x27\x26ff_frame=1\x27\x3B\r\n            if ($ff_processor-\x3Eborder) $url .= \x27\x26ff_border=1\x27\x3B\r\n            if ($ff_processor-\x3Ealign !=1) $url .= \x27\x26ff_align=\x27.$ff_processor-\x3Ealign\x3B\r\n            if ($ff_processor-\x3Etop\x3E0) $url .= \x27\x26ff_top=\x27.$ff_processor-\x3Etop\x3B\r\n    } // switch\r\n    return ff_makePageUrl($url. $params)\x3B\r\n} // ff_makeFormUrl</code>
	</piece>
	<piece id="15">
		<package>FF</package>
		<name>ff_makePageUrl</name>
		<title>Make URL to other page</title>
		<description>Builds an URL to another mambo page\r\n\r\nCall: \r\n    $url = ff_makePageUrl($params = \x27\x27)\x3B\r\n\r\nExample:\r\n\r\n    $url = ff_makePageUrl(\r\n        \x27index.php?option=com_content\x26task=blogsection\x26id=0\x26Itemid=39\x27\r\n    )\x3B</description>
		<code>function ff_makePageUrl($params=\x27\x27)\r\n{\r\n    $url = \x27{mossite}\x27\x3B\r\n    if ($params != \x27\x27) {\r\n        $len = strlen($url)\x3B\r\n        if ($len \x3E 0 \x26\x26 $url[$len-1] != \x27/\x27) $url .= \x27/\x27\x3B\r\n        $url .= $params\x3B\r\n    } // if\r\n    return $url\x3B\r\n} // ff_makePageUrl</code>
	</piece>
	<piece id="16">
		<package>FF</package>
		<name>ff_makeSelfUrl</name>
		<title>Make URL to same form</title>
		<description>Make an URL to the same form. \r\n\r\nCall: \r\n    $url = ff_makeSelfUrl($params = \x27\x27)\x3B\r\n\r\nExample:\r\n\r\n    $url = ff_makeSelfUrl(\x27\x26ff_param_email=\x27.urlencode($email))\x3B</description>
		<code>function ff_makeSelfUrl($params=\x27\x27)\r\n{\r\n    global $ff_processor\x3B\r\n    return ff_makeFormUrl($ff_processor-\x3Eformrow-\x3Ename\x2C $params)\x3B\r\n} // ff_makeSelfUrl</code>
	</piece>
	<piece id="17">
		<package>FF</package>
		<name>ff_mySetSelected</name>
		<title>Set a select list option to *selected*</title>
		<type>Before Form</type>
		<description>Sets a select list option to selected. \r\n\r\nCall: \r\n    ff_mySetSelected(\x27name\x27\x2C \x27value\x27\x2C \x27field\x27)\x3B //field can be label or value</description>
		<code>function ff_mySetSelected($name\x2C $value\x2C $field=\x27value\x27)\r\n{\r\n    global $ff_processor\x3B\r\n    foreach($ff_processor-\x3Erows as $row) {\r\n        if ($row-\x3Ename==$name){\r\n			$row-\x3Edata2 = \x27\x27\x3B\r\n			foreach($row-\x3EselectList as $var){\r\n				if($var-\x3E{$field}==$value){\r\n					$var-\x3Eselected = 1\x3B\r\n				}else{\r\n					$var-\x3Eselected = 0\x3B\r\n				}\r\n				$row-\x3Edata2 .= $var-\x3Eselected.\x22\x3B\x22.$var-\x3Elabel.\x22\x3B\x22.$var-\x3Evalue.\x22\x5Cn\x22\x3B\r\n			}\r\n			break\x3B\r\n		}\r\n        unset($row)\x3B\r\n    }\r\n}</code>
	</piece>
	<piece id="18">
		<package>FF</package>
		<name>ff_query</name>
		<title>Non-select queries against db</title>
		<description>Execute a simple db query.\r\n\r\nInclude by one of:\r\n    $this-\x3EexecPieceByName(\x27ff_InitUtilities\x27)\x3B\r\n    $this-\x3EexecPieceByName(\x27ff_SubmitUtilities\x27)\x3B\r\n    if (!function_exists(\x27ff_query\x27)) $this-\x3EexecPieceByName(\x27ff_query\x27)\x3B\r\n\r\nCall syntax:\r\n\r\n    [$newid = ] ff_query($sql [\x2C $insert = 0])\x3B\r\n\r\n    $sql:    Sql statement to call\r\n    $insert: 1 = return key of auto column when inserting rows\r\n    $newid:  The key of the new row.</description>
		<code>function ff_query($sql\x2C $insert=false\x2C $error=FF_DIE)\r\n{\r\n    global $ff_processor\x3B\r\n    $database = BFFactory::getDBO()\x3B\r\n    if ($ff_processor-\x3Edying \x26\x26 $error!=FF_IGNOREDIE) return -1\x3B\r\n    $database-\x3EsetQuery($sql)\x3B\r\n\r\n    try {\r\n        $database-\x3Equery()\x3B\r\n        $error = null\x3B\r\n        if ($insert)\r\n             return $database-\x3Einsertid()\x3B\r\n    } catch (\x5CRuntimeException $e) {\r\n        $dienow = $error==FF_DIE\x3B\r\n        $error = $e-\x3EgetMessage()\x3B\r\n        if ($dienow) ff_die($error)\x3B\r\n    }\r\n  \r\n    return 0\x3B\r\n} // ff_query</code>
	</piece>
	<piece id="19">
		<package>FF</package>
		<name>ff_redirect</name>
		<title>Basic redirection</title>
		<description>Basic redirection routine supporting multiple targets and methods.\r\n\r\nCall:\r\n \r\nff_redirect($url [\x2C $target=\x27self\x27 \x2C $method=\x27post\x27])\r\n\r\n    $url    = The url to redirect to including the parameters appended.\r\n\r\n    $target = \x27top\x27\x2C \x27parent\x27\x2C \x27self\x27 or \x27blank\x27\r\n\r\n              \x27top\x27    = redirect to the top browser window\r\n              \x27parent\x27 = redirect to the parent frame\r\n              \x27self\x27   = redirect in the same frame (the default)\r\n              \x27blank\x27  = redirect to a new browser window \r\n                         (blank works with post method only)\r\n\r\n    $method = \x27post\x27 or \x27get\x27. The default is \x27post\x27.\r\n\r\n    Example:\r\n\r\n       ff_redirect(\r\n          \x27http://mysite.net/index.php?option=xxx\x26Itemid=33\x27\x2C\r\n          \x27top\x27\r\n       )\x3B</description>
		<code>function ff_redirect($url\x2C $target=\x27self\x27\x2C $method=\x27post\x27)\r\n{\r\n    global $ff_processor\x2C $ff_request\x3B\r\n    if ($ff_processor-\x3Edying) return\x3B\r\n    ob_end_clean()\x3B			//when debugging change this to ob_end_flush()\x3B\r\n    switch (strtolower($method)) {\r\n        case \x27get\x27: {\r\n            switch (strtolower($target)) {\r\n                case \x27top\x27   :\r\n                case \x27parent\x27: break\x3B\r\n                default      : $target = \x27window\x27\x3B //window \x3E document\x2C because cross browser compat\x2C or so I read\r\n            } // switch\r\n            echo \x27\x3Cscript type=\x22text/javascript\x22\x3E\x27.nl().\r\n                 \x22onload=function() { \x22.$target.\x22.location.href=\x27\x22.$url.\x22\x27\x3B }\x22.nl().\r\n                 \x27\x3C/script\x3E\x27.nl().\r\n                 \x27\x3C/\x27 .\x27body\x3E\x27.nl()\x3B\r\n            break\x3B\r\n        } // url\r\n        default: { // post\r\n            $pos = strpos($url\x2C\x27?\x27)\x3B	//find the location of \x27?\x27 after which get parameters usually start\r\n            $ff_request = array()\x3B		//create an array to set it later to hold get parameters in associative form\r\n			if($pos){					//if query parameters are supplied\x2C the whole action becomes http://whatever.com/\r\n				$action=substr($url\x2C 0\x2C $pos)\x3B\r\n			}else{						//if no \x27?\x27 detected action is equal to supplied url\x2C which is a weak check because what if pretty url?\r\n				$action = $url\x3B\r\n			}\r\n            switch (strtolower($target)) {\r\n                case \x27blank\x27 : $target = \x27 target=\x22_blank\x22\x27\x3B  break\x3B\r\n                case \x27top\x27   : $target = \x27 target=\x22_top\x22\x27\x3B    break\x3B\r\n                case \x27parent\x27: $target = \x27 target=\x22_parent\x22\x27\x3B break\x3B\r\n                default      : $target = \x27 target=\x22_self\x22\x27\x3B\r\n            } // switch\r\n			$parts = parse_url($url)\x3B 			//$url still stores are query params\x2C so we parse them\r\n			parse_str($parts[\x27query\x27]\x2C $ff_request)\x3B		//get query part and store into ff_request (defined above)\r\n            echo \x27\x3Cscript language=\x22javascript\x22 type=\x22text/javascript\x22\x3E\x27.nl(). //echo form and script that submits form on load (ajax maybe\x2C more \x27elegant\x27?)\r\n                 \x27\x3C!--\x27.nl().\r\n                 \x27onload = function() { document.ff_redirect.submit()\x3B }\x27.nl().\r\n                 \x27--\x3E\x27.nl().\r\n                 \x27\x3C/script\x3E\x27.nl().\r\n                 \x27\x3Cform action=\x22\x27.$action.\x27\x22 \x27.\r\n                  \x27method=\x22post\x22 \x27.\r\n                  \x27name=\x22ff_redirect\x22 id=\x22ff_redirect\x22 \x27.\r\n                  \x27enctype=\x22multipart/form-data\x22\x27.\r\n                  $target.\r\n                 \x27\x3E\x27.nl()\x3B\r\n            foreach ($ff_request as $key =\x3E $value){ //print out input fields which store GET parameters\r\n				echo \x27\x3Cinput type=\x22hidden\x22 name=\x22\x27.$key.\x27\x22 \x27.\x27value=\x22\x27.htmlentities(urldecode($value)).\x27\x22/\x3E\x27.nl()\x3B\r\n			}\r\n            echo \x27\x3C/form\x3E\x27.nl(). \x27\x3C/\x27 .\x27body\x3E\x27.nl()\x3B\r\n        } // post\r\n    } // switch\r\n    exit\x3B\r\n} // ff_redirect</code>
	</piece>
	<piece id="20">
		<package>FF</package>
		<name>ff_redirectForm</name>
		<title>Redirect to other form</title>
		<description>Redirects to another facile form. \r\n\r\nCall: \r\n\r\n    ff_redirectForm($name\x2C $params = \x27\x27)\x3B\r\n\r\nExample:\r\n\r\n    ff_redirectForm(\r\n        $this\x2C \r\n       \x27SecondForm\x27\x2C \r\n       \x27\x26ff_param_email=\x27.urlencode($email)\r\n    )\x3B</description>
		<code>function ff_redirectForm($name\x2C $params=\x27\x27\x2C $method=\x27post\x27)\r\n{\r\n    $url=ff_makeFormUrl($name\x2C $params)\x3B\r\n    ff_redirectParent($url\x2C $method)\x3B\r\n} // ff_redirectForm</code>
	</piece>
	<piece id="21">
		<package>FF</package>
		<name>ff_redirectPage</name>
		<title>Redirect to other page</title>
		<description>Redirects to another mambo page. \r\n\r\nCall: \r\n    ff_redirectPage($params = \x27\x27)\x3B\r\n\r\nExample:\r\n\r\n    ff_redirectPage(\r\n        \x27index.php?option=com_content\x26task=blogsection\x26id=0\x26Itemid=39\x27\r\n    )\x3B</description>
		<code>function ff_redirectPage($params=\x27\x27\x2C $method=\x27post\x27)\r\n{\r\n    ff_redirectParent(ff_makePageUrl($params)\x2C $method)\x3B\r\n} // ff_redirectPage</code>
	</piece>
	<piece id="22">
		<package>FF</package>
		<name>ff_redirectParentX</name>
		<title>Redirect to parent window</title>
		<description>Redirects to the parent window when runing in iframe\x2C otherwise to self. \r\n\r\nff_redirectParent($url [\x2C $method=\x27post\x27])\r\n    $url    = The url to redirect to including the parameters appended.\r\n\r\n    $method = \x27post\x27 or \x27url\x27. The default is \x27post\x27.\r\n\r\n    Example:\r\n\r\n       ff_redirectParent(\r\n          \x27http://mysite.net/index.php?option=xxx\x26Itemid=33\x27\x2C\r\n          \x27url\x27\r\n       )\x3B</description>
		<code>function ff_redirectParent($url\x2C $method = \x27post\x27)\r\n{\r\n    global $ff_processor\x3B\r\n    if ($ff_processor-\x3Einframe) $target = \x27parent\x27\x3B else $target = \x27self\x27\x3B \r\n    ff_redirect($url\x2C $target\x2C $method)\x3B\r\n} // ff_redirectParent</code>
	</piece>
	<piece id="23">
		<package>FF</package>
		<name>ff_redirectSelf</name>
		<title>Redirect to same form</title>
		<description>Redirects to the same form. \r\n\r\nCall: \r\n    ff_redirectSelf($params = \x27\x27)\x3B\r\n\r\nExample:\r\n    ff_redirectSelf(\x27\x26ff_param_email=\x27.urlencode($email))\x3B</description>
		<code>function ff_redirectSelf($params=\x27\x27\x2C $method=\x27post\x27)\r\n{\r\n    ff_redirectParent(ff_makeSelfUrl($params)\x2C $method)\x3B\r\n} // ff_redirectSelf</code>
	</piece>
	<piece id="24">
		<package>FF</package>
		<name>ff_securityImage</name>
		<title>Security Image</title>
		<description>Create code to display the security image</description>
		<code>global $ff_seccode\x3B\r\n\r\nif (!isset($this-\x3Erecord_id)) { $ff_seccode = null\x3B }\r\n\r\nfunction ff_securityImage()\r\n{\r\n    global $ff_comsite\x2C $ff_seccode\x3B\r\n    if (!isset($ff_seccode)) { \r\n        mt_srand((double)microtime()*1000000)\x3B\r\n        $ff_seccode = mt_rand(10000\x2C 99999)\x3B\r\n        \x5CJoomla\x5CCMS\x5CFactory::getSession()-\x3Eset(\x27ff_seccode\x27\x2C $ff_seccode)\x3B\r\n    } // if\r\n\r\n    return \x27\x3Cimg src=\x22\x27.\x5CJoomla\x5CCMS\x5CUri\x5CUri::root().\x27ff_secimage.php?option=com_breezingforms\x26showSecImage=true\x22 title=\x22\x22 alt=\x22\x22 /\x3E\x27\x3B\r\n} // ff_securityImage</code>
	</piece>
	<piece id="25">
		<package>FF</package>
		<name>ff_select</name>
		<title>Select rows from db</title>
		<description>Execute a select query\r\n\r\nInclude by one of:\r\n\r\n    $this-\x3EexecPieceByName(\x27ff_InitUtilities\x27)\x3B\r\n    $this-\x3EexecPieceByName(\x27ff_SubmitUtilities\x27)\x3B\r\n    if (!function_exists(\x27ff_select\x27)) $this-\x3EexecPieceByName(\x27ff_select\x27)\x3B\r\n\r\nCall syntax:\r\n\r\n    $rows = ff_select($sql)\x3B\r\n\r\n    $sql:    Sql SELECT-statement to call\r\n    $rows:   List of row objects</description>
		<code>function ff_select($sql\x2C $error=FF_DIE)\r\n{\r\n    $database = BFFactory::getDBO()\x3B\r\n    $database-\x3EsetQuery($sql)\x3B\r\n\r\n     try {\r\n        $rows = $database-\x3EloadObjectList()\x3B\r\n        $error = null\x3B\r\n     } catch (\x5CException $e) {\r\n        $dienow = $error==FF_DIE\x3B\r\n        $error = $e-\x3EgetMessage()\x3B\r\n        $rows = array()\x3B\r\n        if ($dienow) ff_die($error)\x3B\r\n     }\r\n  \r\n    return $rows\x3B\r\n} // ff_select</code>
	</piece>
	<piece id="26">
		<package>FF</package>
		<name>ff_selectValue</name>
		<title>Select single value from db</title>
		<description>Execute query to read a single value\r\n\r\nInclude by one of:\r\n    $this-\x3EexecPieceByName(\x27ff_InitUtilities\x27)\x3B\r\n    $this-\x3EexecPieceByName(\x27ff_SubmitUtilities\x27)\x3B\r\n    if (!function_exists(\x27ff_selectValue\x27)) $this-\x3EexecPieceByName(\x27ff_selectValue\x27)\x3B\r\n\r\nCall syntax:\r\n\r\n    $value = ff_selectValue($sql)\x3B\r\n\r\n    $sql:    Sql SELECT-statement to call\r\n    $value:  The value returned by the database</description>
		<code>function ff_selectValue($sql\x2C $def=null\x2C $error=FF_DIE)\r\n{\r\n    $database = BFFactory::getDBO()\x3B\r\n    $database-\x3EsetQuery($sql)\x3B\r\n\r\n    try {\r\n        $value = $database-\x3EloadResult()\x3B\r\n        $error = null\x3B\r\n        if ($value) return $value\x3B\r\n     } catch (\x5CException $e) {\r\n        $dienow = $error==FF_DIE\x3B\r\n        $error = $e-\x3EgetMessage()\x3B\r\n        $rows = array()\x3B\r\n        if ($dienow) ff_die($error)\x3B\r\n     }\r\n\r\n    return $def\x3B\r\n} // ff_selectValue</code>
	</piece>
	<piece id="27">
		<package>FF</package>
		<name>ff_setCheckedX</name>
		<title>Set checkbox/radiobutton checked</title>
		<description>Set a radio button or checkbox checked. \r\n\r\nCall: \r\n    ff_setChecked(\x27name\x27\x2C \x27value\x27)\x3B</description>
		<code>function ff_setChecked($name\x2C $value)\r\n{\r\n    global $ff_processor\x3B\r\n    for ($r = 0\x3B $r \x3C $ff_processor-\x3Erowcount\x3B $r++) {\r\n        $row =\x26 $ff_processor-\x3Erows[$r]\x3B\r\n        if ($row-\x3Ename==$name \x26\x26 $row-\x3Edata1==$value)\r\n            $row-\x3Eflag1 = 1\x3B\r\n        unset($row)\x3B\r\n    } // for\r\n} // ff_setChecked</code>
	</piece>
	<piece id="28">
		<package>FF</package>
		<name>ff_setSelectedX</name>
		<title>Set a select list option to *selected*</title>
		<description>Sets a select list option to selected. \r\n\r\nCall: \r\n    ff_setSelected(\x27name\x27\x2C \x27value\x27)\x3B</description>
		<code>function ff_setSelected($name\x2C $value)\r\n{\r\n    global $ff_processor\x3B\r\n    for ($r = 0\x3B $r \x3C $ff_processor-\x3Erowcount\x3B $r++) {\r\n        $row =\x26 $ff_processor-\x3Erows[$r]\x3B\r\n        if ($row-\x3Ename==$name)\r\n            $row-\x3Edata2 =\r\n                preg_replace(\r\n                    \x27/(^|\x5Cr\x5Cn|\x5Cn)(0|1)\x3B([^\x3B]*)\x3B(\x27.$value.\x27)($|\x5Cr\x5Cn|\x5Cn)/\x27\x2C\r\n                    \x27${1}1\x3B${3}\x3B${4}${5}\x27\x2C\r\n                    $row-\x3Edata2\r\n                )\x3B\r\n        unset($row)\x3B\r\n    } // for\r\n} // ff_setSelected</code>
	</piece>
	<piece id="29">
		<package>FF</package>
		<name>ff_setValueX</name>
		<title>Set text\x2C textarea\x2C hidden value</title>
		<description>Set value of a Static Text\x2C Text\x2C Textarea or Hidden Input. \r\n\r\nCall: \r\n    ff_setValue(\x27name\x27\x2C \x27value\x27)\x3B</description>
		<code>function ff_setValue($name\x2C $value)\r\n{\r\n    global $ff_processor\x3B\r\n    for ($r = 0\x3B $r \x3C $ff_processor-\x3Erowcount\x3B $r++) {\r\n        $row =\x26 $ff_processor-\x3Erows[$r]\x3B\r\n        if ($row-\x3Ename==$name)\r\n            $row-\x3Edata1 = $value\x3B\r\n        unset($row)\x3B\r\n    } // for\r\n} // ff_setValue</code>
	</piece>
	<piece id="30">
		<package>GN</package>
		<name>gn_countRecords</name>
		<title>count records</title>
		<description>Count the records (rows) of a form.\r\n* $formName : form name.</description>
		<code>function gn_countRecords($formName) {\r\n    $db = BFFactory::getDbo()\x3B\r\n    $sql = \x27SELECT COUNT(1) FROM #__facileforms_records WHERE `name`=\x27.$db-\x3EQuote($formName)\x3B\r\n\r\n    $db-\x3EsetQuery($sql)\x3B\r\n    $nb_countRecords = $db-\x3EloadResult()\x3B\r\n\r\n    return $nb_countRecords\x3B\r\n}</code>
	</piece>
	<piece id="31">
		<package>GN</package>
		<name>gn_getDBField</name>
		<title>get DB field</title>
		<description>Return name item or \x22UNKNOWN\x22 text.\r\n\r\n* $name  : field name\r\n* $recid : current record id.</description>
		<code>function gn_getDBField($name\x2C $recid) {\r\n    $db = \x26BFFactory::getDbo()\x3B\r\n    $sql = \x22SELECT value from #__facileforms_subrecords WHERE record=$recid AND `name`=\x27$name\x27\x22\x3B \r\n    return ff_selectValue($sql\x2C \x27UNKNOWN\x27)\x3B\r\n}</code>
	</piece>
	<piece id="32">
		<package>GN</package>
		<name>gn_getDBFieldsDefaultValue</name>
		<title>get DB fields default value (user)</title>
		<description>Retrieves the default value identified by its name of a User \x3E Fields.\r\n\r\nPrerequisite: requires loading gn_initLib :\r\n * either like this: \x3C?php $this-\x3EexecPieceByName(\x27gn_InitLib\x27)\x3B return gn_getDBFieldsDefaultValue(\x27club-ffvelo\x27)\x3B ?\x3E\r\n * or in \r\n  * *** begin form \x3E $this-\x3EexecPieceByName(\x27gn_InitLib\x27)\x3B\r\n  * *** \x3C?php return gn_getDBFieldsDefaultValue(\x27club-ffvelo\x27)\x3B ?\x3E\r\n\r\nparameter alias = alias of the field name (example : \x27club-ffvelo\x27)\r\n\r\nExample: \r\n\r\n\x3C?php $this-\x3EexecPieceByName(\x27gn_InitLib\x27)\x3B return gn_getDBFieldsDefaultValue(\x27club-ffvelo\x27)\x3B ?\x3E\r\n\r\nIn the database\x2C the table #__fields contains all default values.</description>
		<code>function gn_getDBFieldsDefaultValue($name) {\r\n    $userid = Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27id\x27\x2C \x27\x27)\x3B\r\n    if ($userid \x3E 0) {\r\n        $db = BFFactory::getDBO()\x3B\r\n        $db-\x3EsetQuery(\x22SELECT default_value FROM #__fields WHERE name = \x27$name\x27\x22)\x3B\r\n        \r\n        // DEBUG $db-\x3EsetQuery(\x22SELECT * FROM #__fields WHERE name = \x27club-ffvelo\x27\x22)\x3B\r\n        // DEBUG return var_dump($db-\x3ELoadObjectList())\x3B\r\n        \r\n        return $db-\x3ELoadResult()\x3B\r\n    }\r\n}</code>
	</piece>
	<piece id="33">
		<package>GN</package>
		<name>gn_getDBStripeId</name>
		<title>get DB Stripe Id</title>
		<description>Retrieves StripeId value.\r\nStripeId is not stored as a standard value.\r\n* $recid : record number.</description>
		<code>function gn_getDBStripeId($recid) {\r\n    if (isset($recid)) {\r\n        $sql = \x22SELECT paypal_tx_id FROM #__facileforms_records WHERE id=$recid\x22\x3B\r\n        $stripe_id = ff_selectValue($sql\x2C \x27FAILED\x27)\x3B\r\n\r\n        // A AMELIORER \r\n        // $db = BFFactory::getDBO()\x3B\r\n        // $db-\x3EsetQuery($sql)\x3B\r\n        // $stripe_id = $db-\x3ELoadResult()\x3B        \r\n        // if (ŝtripe_id == null) { stripe_id = \x27FAILED\x27}\r\n    }\r\n    else {\r\n        $stripe_id = \x27$recid not defined\x27\x3B\r\n    }\r\n\r\n    return $stripe_id\x3B\r\n}</code>
	</piece>
	<piece id="34">
		<package>GN</package>
		<name>gn_getFormFromFormName</name>
		<title>get form data with name</title>
		<description>Gives information with the name of the form.\r\nThe most interesting ones:\r\n$form-\x3Eid = 51\r\n$form-\x3Ename = \x22SystemDashboard\x22\r\n$form-\x3Etitle = \x22Tableau de bord\x22\r\n$form-\x3Epublished =0/1\r\n$form-\x3Edescription</description>
		<code>function gn_getFormFromFormName($formname = \x27SystemDashboard\x27) {\r\n    $form = \x27NOT FOUND\x27\x3B\r\n    if ($formname != null) {\r\n        $database = \x26BFFactory::getDbo()\x3B\r\n        \r\n        $sql = \x3C\x3C\x3CSQL\r\n        SELECT\r\n            *\r\n            from\r\n            #__facileforms_forms\r\n            WHERE name=\x27$formname\x27 and published=1\r\n            order by ordering\x2C id\r\n        SQL\x3B\r\n                \r\n        $database-\x3EsetQuery($sql)\x3B\r\n        $forms = $database-\x3EloadObjectList()\x3B\r\n        if (count($forms) \x3C 1) {\r\n            echo \x27[Form \x27.htmlentities($formname\x2C ENT_QUOTES\x2C \x27UTF-8\x27).\x27 not found!]\x27\x3B\r\n            $ok = false\x3B\r\n        } else\r\n            $form = $forms[0]\x3B\r\n    } else {\r\n        Joomla\x5CCMS\x5CFactory::getApplication()-\x3EenqueueMessage(\x27No form name provided!\x27\x2C \x27error\x27)\x3B\r\n        $ok = false\x3B\r\n    } // if\r\n\r\n    return $form\x3B\r\n}</code>
	</piece>
	<piece id="35">
		<package>GN</package>
		<name>gn_getNbInscrit</name>
		<title>count value</title>
		<description>Count specific text occurrences in a form list.\r\n\r\n* $form: form number.\r\n* $element_parcours : field name where to search the text.\r\n* $element_path: specific text to count</description>
		<code>function gn_getNbInscrit($form\x2C $element_parcours\x2C $distance) {\r\n    $db = BFFactory::getDbo()\x3B\r\n    $sql = \x22SELECT COUNT(1) FROM #__facileforms_subrecords AS s  INNER JOIN #__facileforms_records AS r ON r.id = s.record WHERE r.form = \x22 . $db-\x3EQuote($form) . \x22 AND s.`name`=\x22 . $db-\x3EQuote($element_parcours) .\x22 AND s.value =\x27\x22 . $distance  .  \x22\x27\x22\x3B \r\n    $db-\x3EsetQuery($sql)\x3B\r\n    $nb_parcours = $db-\x3EloadResult()\x3B\r\n\r\n    return $nb_parcours\x3B\r\n}</code>
	</piece>
	<piece id="36">
		<package>GN</package>
		<name>gn_getNextNumDossard</name>
		<title>get next</title>
		<description>Returns the next competitor number of a form \r\n* $form : the number of the current form.\r\n* $field_dossard: the name of the element which contains the competitor number (FIELD_DOSSARD field)\x2C\r\n* $first_dossard: the first competitor number to be assigned (FIRST_DOSSARD).\r\n\r\n  // Principle: search in the database in the #__facileforms_subrecords table for the largest competitor number already assigned for this form.\r\n    // The table #__facileforms_subrecords (list of each element value) has :\r\n    // * a value text field containing the data\x2C\r\n    // * a text field `name` containing the name of the element\x2C\r\n    // \x22 an integer field record containing the id of the record (\x3C=\x3E record_id).\r\n\r\n    // The table #__facileforms_records (list of records) has:\r\n    // \x22 an integer field id containing the id of the record (\x3C=\x3E record_id).\r\n    // * an integer field form containing the form number (\x3C=\x3E form_id</description>
		<code>function gn_getNextNumDossard($form\x2C $field_dossard\x2C $first_dossard) {\r\n    $db = \x26BFFactory::getDbo()\x3B\r\n      $sql = \x22SELECT MAX(CAST(s.value as UNSIGNED)) FROM #__facileforms_subrecords AS s INNER JOIN #__facileforms_records AS r ON r.id = s.record WHERE r.form = \x22 . $db-\x3EQuote($form) . \x22 AND s.`name`=\x22 . $db-\x3EQuote($field_dossard)\x3B\r\n\r\n    // Marche aussi\x2C mais sans message d\x27erreur clair.\r\n    // $dossard = ff_selectValue($sql\x2C $first_dossard-1)+1\x3B\r\n\r\n    $db-\x3EsetQuery($sql)\x3B\r\n    $dossard = $db-\x3EloadResult()\x3B\r\n                \r\n    // Sécurité.\r\n    if (!isset($dossard) || ($dossard \x3C $first_dossard)) {\r\n        $dossard = $first_dossard-1\x3B\r\n    }\r\n\r\n    return $dossard+1\x3B\r\n}</code>
	</piece>
	<piece id="37">
		<package>GN</package>
		<name>gn_getNextNumDossard</name>
		<title>get next</title>
		<description>Returns the next competitor number of a form \r\n* $form : the number of the current form.\r\n* $field_dossard: the name of the element which contains the competitor number (FIELD_DOSSARD field)\x2C\r\n* $first_dossard: the first competitor number to be assigned (FIRST_DOSSARD).\r\n\r\n  // Principle: search in the database in the #__facileforms_subrecords table for the largest competitor number already assigned for this form.\r\n    // The table #__facileforms_subrecords (list of each element value) has :\r\n    // * a value text field containing the data\x2C\r\n    // * a text field `name` containing the name of the element\x2C\r\n    // \x22 an integer field record containing the id of the record (\x3C=\x3E record_id).\r\n\r\n    // The table #__facileforms_records (list of records) has:\r\n    // \x22 an integer field id containing the id of the record (\x3C=\x3E record_id).\r\n    // * an integer field form containing the form number (\x3C=\x3E form_id</description>
		<code>function gn_getNextNumDossard($form\x2C $field_dossard\x2C $first_dossard) {\r\n    $db = \x26BFFactory::getDbo()\x3B\r\n      $sql = \x22SELECT MAX(CAST(s.value as UNSIGNED)) FROM #__facileforms_subrecords AS s INNER JOIN #__facileforms_records AS r ON r.id = s.record WHERE r.form = \x22 . $db-\x3EQuote($form) . \x22 AND s.`name`=\x22 . $db-\x3EQuote($field_dossard)\x3B\r\n\r\n    // Marche aussi\x2C mais sans message d\x27erreur clair.\r\n    // $dossard = ff_selectValue($sql\x2C $first_dossard-1)+1\x3B\r\n\r\n    $db-\x3EsetQuery($sql)\x3B\r\n    $dossard = $db-\x3EloadResult()\x3B\r\n                \r\n    // Sécurité.\r\n    if (!isset($dossard) || ($dossard \x3C $first_dossard)) {\r\n        $dossard = $first_dossard-1\x3B\r\n    }\r\n\r\n    return $dossard+1\x3B\r\n}</code>
	</piece>
	<piece id="38">
		<package>GN</package>
		<name>gn_getSubFormsFromFormId</name>
		<title>new BF internal</title>
		<description>Internal use of new BF functions (here: gn_getSubFormsFromFormId).</description>
		<code>function gn_getSubFormsFromFormId($formid = 51) {\r\n    $subforms = \x27NOT FOUND\x27\x3B\r\n    if ($formid != null) {\r\n        $database = \x26BFFactory::getDbo()\x3B\r\n        \r\n        $sql = \x3C\x3C\x3CSQL\r\n        SELECT\r\n            *\r\n            from\r\n            #__facileforms_elements e \r\n            WHERE \r\n            e.form=$formid \r\n            AND e.published = 1 \r\n            AND e.logging = 1\r\n            ORDER BY ordering\x2C id\r\n        SQL\x3B\r\n                \r\n        $database-\x3EsetQuery($sql)\x3B\r\n        $subforms = $database-\x3EloadObjectList()\x3B\r\n        if (count($subforms) \x3C 1) {\r\n            echo \x27[Form \x27.htmlentities($formid\x2C ENT_QUOTES\x2C \x27UTF-8\x27).\x27 not found!]\x27\x3B\r\n            $ok = false\x3B\r\n        } \r\n    } else {\r\n        Joomla\x5CCMS\x5CFactory::getApplication()-\x3EenqueueMessage(\x27No form name provided!\x27\x2C \x27error\x27)\x3B\r\n        $ok = false\x3B\r\n    } // if\r\n\r\n    return $subforms\x3B\r\n}</code>
	</piece>
	<piece id="39">
		<package>GN</package>
		<name>gn_InitLib</name>
		<title>Init Library</title>
		<description>A collection of useful functions for use in form pieces. \r\n\r\nInclude by: \r\n    $this-\x3EexecPieceByName(\x27gn_InitLib\x27)\x3B</description>
		<code>//+trace high none\r\n// if (!defined(\x27GN_DIE\x27))                    $this-\x3EexecPieceByName(\x27gn_Constants\x27)\x3B\r\nif (!function_exists(\x27gn_getDBFieldsDefaultValue\x27))      $this-\x3EexecPieceByName(\x27gn_getDBFieldsDefaultValue\x27)\x3B\r\nif (!function_exists(\x27gn_updateDBField\x27))      $this-\x3EexecPieceByName(\x27gn_updateDBField\x27)\x3B\r\nif (!function_exists(\x27gn_getDBField\x27))      $this-\x3EexecPieceByName(\x27gn_getDBField\x27)\x3B\r\nif (!function_exists(\x27gn_getDBStripeId\x27))      $this-\x3EexecPieceByName(\x27gn_getDBStripeId\x27)\x3B\r\nif (!function_exists(\x27gn_getNextNumDossard\x27))      $this-\x3EexecPieceByName(\x27gn_getNextNumDossard\x27)\x3B\r\nif (!function_exists(\x27gn_setMemoryData\x27))      $this-\x3EexecPieceByName(\x27gn_setMemoryData\x27)\x3B\r\nif (!function_exists(\x27gn_getNbInscrit\x27))      $this-\x3EexecPieceByName(\x27gn_getNbInscrit\x27)\x3B\r\n\r\nif (!function_exists(\x27gn_getFormFromFormName\x27))      $this-\x3EexecPieceByName(\x27gn_getFormFromFormName\x27)\x3B\r\nif (!function_exists(\x27gn_newRecord\x27))      $this-\x3EexecPieceByName(\x27gn_newRecord\x27)\x3B\r\nif (!function_exists(\x27gn_newSubRecord\x27))      $this-\x3EexecPieceByName(\x27gn_newSubRecord\x27)\x3B\r\nif (!function_exists(\x27gn_getSubFormsFromFormId\x27))      $this-\x3EexecPieceByName(\x27gn_getSubFormsFromFormId\x27)\x3B\r\n\r\nif (!function_exists(\x27gn_countRecords\x27))      $this-\x3EexecPieceByName(\x27gn_countRecords\x27)\x3B</code>
	</piece>
	<piece id="40">
		<package>GN</package>
		<name>gn_newRecord</name>
		<title>new BF record</title>
		<description>Creates a new BF record (without subrecord).\r\nIt will be in the table\x2C but not visible without a subrecord.\r\n\r\nExample:\r\n$record = gn_newRecord(\x27SystemDashboard\x27)\x3B // creates the new record for the SystemDashboard form.\r\ngn_newSubRecord($record\x2C \x27Element\x27\x2C $this-\x3Eformrow-\x3Ename)\x3B // creates an entry in the row.\r\ngn_newSubRecord($record\x2C \x27Value\x27\x2C \x22This is a value\x22)\x3B\r\ngn_newSubRecord($record\x2C \x27Comment\x27\x2C \x22This is a comment\x22)\x3B</description>
		<code>function gn_newRecord($form_name = \x27SystemDashboard\x27) {\r\n    // Initialisation\r\n    $jinput = Joomla\x5CCMS\x5CFactory::getApplication()-\x3Einput\x3B\r\n    $ip = $jinput-\x3Eserver-\x3Eget(\x27REMOTE_ADDR\x27\x2C \x27\x27\x2C \x27\x27)\x3B\r\n    \r\n    $jbrowserInstance = Joomla\x5CCMS\x5CEnvironment\x5CBrowser::getInstance()\x3B\r\n    $browser = $jbrowserInstance-\x3EgetAgentString()\x3B\r\n    $platform = $jbrowserInstance-\x3EgetPlatform()\x3B\r\n    $form = gn_getFormFromFormName($form_name)\x3B\r\n    \r\n    $database = \x26BFFactory::getDbo()\x3B\r\n    \r\n    $record = new facileFormsRecords($database)\x3B\r\n    $record-\x3Esubmitted = Joomla\x5CCMS\x5CFactory::getDate(\x27now\x27)-\x3Eformat(\x27Y-m-d H:i:s\x27\x2C true)\x3B\r\n    $record-\x3Eform = $form-\x3Eid\x3B\r\n    $record-\x3Etitle = $form-\x3Etitle\x3B\r\n    $record-\x3Ename = $form-\x3Ename\x3B\r\n    $record-\x3Eip = $ip\x3B\r\n    $record-\x3Ebrowser = $browser\x3B\r\n    $record-\x3Eopsys = $platform\x3B\r\n    $record-\x3Eprovider = \x22\x22\x3B\r\n    $record-\x3Eviewed = 0\x3B\r\n    $record-\x3Eexported = 0\x3B\r\n    $record-\x3Earchived = 0\x3B\r\n    if (Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27id\x27\x2C 0) \x3E 0) {\r\n        $record-\x3Euser_id = Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27id\x27\x2C 0)\x3B\r\n        $record-\x3Eusername = Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27username\x27\x2C \x27\x27)\x3B\r\n        $record-\x3Euser_full_name = Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27name\x27\x2C \x27\x27)\x3B\r\n    } else {\r\n        $record-\x3Euser_id = Joomla\x5CCMS\x5CFactory::getUser()-\x3Eget(\x27id\x27\x2C 0)\x3B\r\n        $record-\x3Eusername = \x27-\x27\x3B\r\n        $record-\x3Euser_full_name = \x27-\x27\x3B\r\n    }\r\n    \r\n    // echo \x22\x3CBR\x3E\x5Cn\x3CBR\x3E\x5CnRECORD ID=\x22 . var_dump($record)\x3B\r\n    // echo \x22\x3CBR\x3E\x5Cn\x3CBR\x3E\x5Cn\x22\x3B\r\n    if (!$record-\x3Estore()) {\r\n        echo \x22\x3CBR\x3E\x5Cn\x3CBR\x3E\x5CnERROR=\x22 .$record-\x3EgetError()\x3B\r\n        return\x3B\r\n    }\r\n    \r\n    return $record\x3B\r\n}</code>
	</piece>
	<piece id="41">
		<package>GN</package>
		<name>gn_newSubRecord</name>
		<title>new BF sub record</title>
		<description>Set a new entry in a BF record.\r\n\r\n* $record : record to complete\r\n* $name  : field name\r\n* $value : value to set to the field of the record.\r\n\r\nWarning: only do this on a new record or check that this entry does not already exist.\r\nThe value must not be already setted.\r\n\r\nExample:\r\n$record = gn_newRecord(\x27SystemDashboard\x27)\x3B // creates the new record for the SystemDashboard form.\r\ngn_newSubRecord($record\x2C \x27Element\x27\x2C $this-\x3Eformrow-\x3Ename)\x3B // creates an new entry (value) for the record\r\ngn_newSubRecord($record\x2C \x27Value\x27\x2C \x22This is a value\x22)\x3B\r\ngn_newSubRecord($record\x2C \x27Comment\x27\x2C \x22This is a comment\x22)\x3B</description>
		<code>function gn_newSubRecord($record\x2C $name\x2C $value) {\r\n    $subrecords = gn_getSubFormsFromFormId($record-\x3Eform)\x3B\r\n    foreach ($subrecords as $sr) {\r\n        if ($sr-\x3Ename == $name) {\r\n            $database = \x26BFFactory::getDbo()\x3B\r\n            $subrecord = new facileFormsSubrecords($database)\x3B\r\n            //    $subrecord-\x3Eid // identifier (to be created)\r\n            $subrecord-\x3Erecord = $record-\x3Eid\x3B // record id\r\n            $subrecord-\x3Eelement = $sr-\x3Eid\x3B // element id\r\n            $subrecord-\x3Ename = $sr-\x3Ename\x3B // element name\r\n            $subrecord-\x3Etype = $sr-\x3Etype\x3B // data type\r\n            $subrecord-\x3Evalue = $value\x3B // data value\r\n            $subrecord-\x3Estore()\x3B\r\n            break\x3B\r\n        }\r\n    }\r\n}</code>
	</piece>
	<piece id="42">
		<package>GN</package>
		<name>gn_page_fin</name>
		<title>Page FIN (Last - 1)</title>
		<type>Element Action</type>
		<description>Go to last page - 1 (Submit page\x2C before Thanks Page)</description>
		<code>function gn_page_fin(element\x2C action)\r\n{\r\n    ff_switchpage(ff_lastpage-1)\x3B\r\n} // gn_page_fin</code>
	</piece>
	<piece id="43">
		<package>GN</package>
		<name>gn_page4</name>
		<title>Page 4</title>
		<type>Element Action</type>
		<description>Switches to page 4.</description>
		<code>function gn_page4(element\x2C action)\r\n{\r\n    if (ff_lastpage \x3E= 4) ff_switchpage(4)\x3B\r\n} // gn_page4</code>
	</piece>
	<piece id="44">
		<package>GN</package>
		<name>gn_setMemoryData</name>
		<title>set data in memory</title>
		<description>Updates the element field provided that the field pre-exists.\r\nSet a non-zero default value in BF\x2C for example the - character\x2C\r\nto force its creation in data arrays in memory.\r\n* $that : put $this\r\n* $element : the name of the element (ex : \x27Dossard\x27).\r\n* $value : the value to replace in the element (ex : 508).</description>
		<code>function gn_setMemoryData(\x26$that\x2C $element\x2C $value) {\r\n    // Write into maildata table for mailing data.\r\n    foreach ($that-\x3Emaildata as \x26$entry) {\r\n        if ($entry[_FF_DATA_NAME] == $element) {\r\n            $entry[_FF_DATA_VALUE] = $value\x3B\r\n            break\x3B\r\n    	}\r\n    }\r\n\r\n    // Write into savedata table for database data.\r\n    foreach ($that-\x3Esavedata as \x26$entry) {\r\n        if ($entry[_FF_DATA_NAME] == $element) {\r\n            $entry[_FF_DATA_VALUE] = $value\x3B\r\n            break\x3B\r\n    	}\r\n    }\r\n}</code>
	</piece>
	<piece id="45">
		<package>GN</package>
		<name>gn_updateDBField</name>
		<title>update DB field</title>
		<description>Updates the name element in base provided that the field pre-exists.\r\n\r\nIN COMMENT\x2C because the update in base has been replaced by an update in memory in Submit Pieces \x3E Begin Submit \x3E Custom.\r\nwith gn_setMemoryData.\r\n \r\nNB : Put a non-null default value in BF\x2C for example the character -.\r\n* $name : the name of the field\r\n* $recid : the current record id.\r\n* $value : the value to fill in the database.</description>
		<code>function gn_updateDBField($name\x2C $recid\x2C $value) {\r\n    $db = \x26BFFactory::getDbo()\x3B\r\n    $sql = \x27UPDATE #__facileforms_subrecords SET value = \x27 . $db-\x3Equote($value) . \x22 WHERE record=$recid AND `name`=\x27$name\x27\x22\x3B \r\n    $db-\x3EsetQuery($sql)\x3B\r\n    $db-\x3Eexecute()\x3B\r\n}</code>
	</piece>
	<piece id="46">
		<package>GN</package>
		<name>gn_validate_page_fin</name>
		<title>Validate and FIN page</title>
		<type>Element Action</type>
		<description>Validates the current page\x2C and if everything is ok is switches to Submit page (Last -1)\x2C before Thanks you page.</description>
		<code>function gn_validate_page_fin(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n\r\n    error = ff_validation(ff_currentpage)\x3B\r\n    if (error != \x27\x27) {\r\n       if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           swal(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus(\x27\x27)\x3B\r\n    } else {\r\n        ff_switchpage(ff_lastpage-1)\x3B\r\n        self.scrollTo(0\x2C0)\x3B   \r\n    }\r\n} // gn_validate_page_fin</code>
	</piece>
	<piece id="47">
		<package>GN</package>
		<name>gn_validate_submit</name>
		<title>Validate and submit form (SPAM)</title>
		<type>Element Action</type>
		<description>Add ANTI-SPAM test before to validate the form. \r\nTest if Nom = Prenom. before submitting the form.\r\nIf NOM = PRENOM \x3E\x3E Attaques classique des .ru (2021)\r\nMise à jour sept. 2021 (Gil)</description>
		<code>function gn_validate_submit(element\x2C action)\r\n{\r\n    if(typeof bfUseErrorAlerts != \x27undefined\x27){\r\n     JQuery(\x22.bfErrorMessage\x22).html(\x27\x27)\x3B\r\n     JQuery(\x22.bfErrorMessage\x22).css(\x22display\x22\x2C\x22none\x22)\x3B\r\n    }\r\n    error = ff_validation(0)\x3B\r\n    if (error != \x27\x27) {\r\n\r\n        if(typeof bfUseErrorAlerts == \x27undefined\x27){\r\n           alert(error)\x3B\r\n        } else {\r\n           bfShowErrors(error)\x3B\r\n        }\r\n        ff_validationFocus()\x3B\r\n    } else {\r\n	// Vérif SPAM si le NOM et PRENOM sont différents = OK\r\n	nom = ff_getElementByName(\x22Nom\x22).value \x3B\r\n	prenom = ff_getElementByName(\x22Prenom\x22).value \x3B\r\n		\r\n	// Minuscule\x2C puis enlève les espaces de Début et de Fin\r\n	nom =nom.toLowerCase().trim() \x3B\r\n	prenom = prenom.toLowerCase().trim() \x3B\r\n\r\n	// SPAM si le Nom = Prénom ou si le Prénom commence par le Nom (Gil \x3E Gil-André)\r\n	if ( prenom.search(nom) == 0 ){\r\n		// Tentative de SPAM\x2C Sortie Page d\x27accueil Cyclo\r\n		gn_annuler_cyclo() \x3B\r\n	} else {\r\n		// Nom et Prénom OK\x2C Submit Formulaire\r\n		ff_submitForm() \x3B \r\n		}\r\n	}	\r\n} // gn_validate_submit</code>
	</piece>
	<piece id="48">
		<package>GN</package>
		<name>gn_annuler_cyclo</name>
		<title>Annuler \x26 Cyclo Home Page</title>
		<type>Element Action</type>
		<description>Cancel and go to site \x22VCMB Cyclo\x22 Home page</description>
		<code>function gn_annuler_cyclo(element\x2C action)\r\n{\r\n  eval(\x27document.\x27+ff_processor.form_id).reset()\x3B\r\n  window.location.href = \x22https://cyclo.vcmb.fr\x22\x3B\r\n \r\n} // gn_annuler_cyclo</code>
	</piece>
</FacileFormsPackage>
